{"version":3,"sources":["pages/HomePage.jsx","components/MainNav.jsx","selectors/boardSelector.js","services/http.service.js","services/util.service.js","services/board.service.js","services/socket.service.js","store/actions/boardActions.js","components/task-cmps/task-actions/LabelList.jsx","components/task-cmps/TaskPreview.jsx","hooks/useKeypress.jsx","hooks/useOnClickOutSide.js","components/TextEditor.jsx","components/task-cmps/ListMenu.jsx","components/task-cmps/TaskList.jsx","components/task-cmps/task-actions/LabelPicker.jsx","components/task-cmps/task-actions/DatePicker.jsx","store/actions/generalAction.js","components/task-cmps/task-actions/checklist-cmps/ChecklistPicker.jsx","services/cloudinary.service.js","components/task-cmps/task-actions/CoverPicker.jsx","components/task-cmps/task-actions/TaskActions.jsx","components/task-cmps/task-actions/checklist-cmps/ChecklistItem.jsx","components/task-cmps/task-actions/checklist-cmps/TaskChecklist.jsx","components/ActivityLog.jsx","pages/TaskDetails.jsx","components/task-cmps/AddTaskList.jsx","components/board-menu-cmps/BoardBgPicker.jsx","components/board-menu-cmps/BoardMenu.jsx","pages/BoardDetails.jsx","pages/BoardsPage.jsx","App.jsx","serviceWorker.js","store/reducers/boardReducer.js","store/reducers/generalReducer.js","store/index.js","index.js"],"names":["HomePage","console","log","process","style","paddingTop","fontSize","MainNav","className","to","exact","activeClassName","selectCurrBoard","createSelector","state","board","currBoard","axios","Axios","create","withCredentials","endpoint","data","ajax","a","method","url","res","response","status","utilService","makeId","length","txt","possible","i","charAt","Math","floor","random","applyDrag","arr","dragResult","removedIndex","addedIndex","payload","result","itemToAdd","splice","reorder","list","startIndex","endIndex","Array","from","removed","move","source","destination","droppableSource","droppableDestination","sourceClone","destClone","index","droppableId","boardService","query","HttpService","getById","update","getEmptyList","id","title","theme","tasks","getEmptyTask","description","creatorId","membersId","comments","dueDate","labels","isDone","images","checklists","cover","background","isFull","type","getEmptyCheckList","listItems","getEmptyListItem","newActivity","cardTxt","boardTxt","taskId","date","Date","now","_id","socket","socketService","setup","io","terminate","on","eventName","cb","off","emit","getBoardById","dispatch","warn","saveBoard","updatedBoard","boardCopy","JSON","parse","stringify","activities","savedBoard","loadTask","getState","currTask","updateTask","task","LabelList","onLabelClicked","expandMode","useDispatch","isExpanded","useSelector","handleClick","ev","preventDefault","map","label","onClick","key","backgroundColor","color","Container","styled","div","props","backgroundImage","minHeight","backgroundSize","display","fontFamily","calendarStrings","lastDay","sameDay","nextDay","sameElse","TaskPreview","useRouteMatch","doneCount","useMemo","reduce","totalCount","checklist","acc","item","checklistItemsAmount","isDue","setHours","setDate","getDate","getTime","draggableId","provided","draggableProps","dragHandleProps","ref","innerRef","draggable","src","dir","calendar","useKeyPress","targetKey","useState","keyPressed","setKeyPressed","downHandler","upHandler","useEffect","window","addEventListener","removeEventListener","useOnClickOutside","handler","exceptionalRef","listener","event","current","contains","target","document","TextEditor","text","name","onInputBlur","isWide","isFocused","onChange","onSubmit","onEscape","placeholder","isEditing","setIsEditing","initialText","setInitialText","inputEl","useRef","enter","esc","focus","value","ModuleText","React","createElement","updateText","autoFocus","rows","defaultValue","onBlur","inputVal","test","ListMenu","onCloseMenu","onRemoveList","onAddTask","TaskList","taskList","taskListIdx","onListUpdated","taskListCopy","setTaskListCopy","newTask","setNewTask","isMenuOpen","setIsMenuOpen","wrapperRef","emptyTask","handleTaskChange","updateList","updatedTaskList","addTask","clickSource","push","stopEditing","LabelPicker","onCloseModal","onTaskUpdated","labelsUpdated","bounds","exceptionRef","selectedLabel","setSelectedLabel","handleChange","updateLabel","labelsCopy","labelIdx","findIndex","taskCopy","taskLabelIdx","labelToEdit","find","idx","toggleLabels","selectLabelToEdit","DatePicker","createActivity","timestamp","isRemoveActivity","moment","format","submitDate","toggleInitialAddition","isInitial","ChecklistPicker","sidebarRef","setChecklist","emptyChecklist","addChecklist","checklistCopy","uploadImg","UPLOAD_URL","formData","FormData","append","files","fetch","body","then","json","catch","err","error","HalfBgcWrapper","FullBgcWrapper","backgroundPosition","CoverPicker","selectedCover","setSelectedCover","loading","setLoading","handleSelected","handleLayout","handleThemeChange","handleUpload","cloudinaryService","img","isCover","htmlFor","height","width","TaskActions","onUpdateTask","onLabelsUpdated","onAddActivity","currAction","setCurrAction","setBounds","toggle","isActive","getBoundingClientRect","top","left","innerWidth","updateWidthAndHeight","useCallback","getElementById","right","closeModal","ChecklistItem","onRemoveItem","itemCopy","setItem","displayMsg","setDisplayMsg","unSavedTitle","setUnsavedTitle","editorRef","initialRender","prevState","updateItem","checked","handleClose","activity","TaskChecklist","newItem","setNewItem","checklistTitle","setChecklistTitle","progress","setProgress","isInitialAddition","general","addItem","donePrecent","round","emptyItem","removeItem","itemId","updateChecklist","currItem","updatedChecklist","currChecklist","filter","percent","lastWeek","nextWeek","ActivityLog","filteredActivities","showContent","setShowContent","showMore","setShowMore","slice","setList","setIndex","dangerouslySetInnerHTML","__html","newIndex","newShowMore","newList","concat","TaskDetails","activeAction","setActiveAction","setTask","modalHeaderRef","useParams","history","useHistory","load","overflowX","updateBoard","unshift","taskLists","forEach","updateBoardLabels","updatedLabels","editedLabel","currLabel","addActivity","handleActiveAction","action","class","crossOrigin","stopPropagation","updatedTask","AddTaskList","onBoardUpdated","newTaskList","setTaskList","addTaskList","emptyTaskList","override","css","BoardBgPicker","onGoBack","bgType","setBgType","handleStyle","size","BoardMenu","closeMenu","menuBtnRef","wrapperReff","selectedAction","setAction","selectAction","listen","location","classList","BoardDetails","boardId","path","loadBoard","updateCurrBoard","currList","setCurrBoard","removeList","taskListId","toggleMenu","onDragEnd","tasklists","newState","items","sIndex","dIndex","fromList","toList","direction","snapshot","droppableProps","component","BoardsPage","boards","getBoards","App","Boolean","hostname","match","initialState","store","createStore","combineReducers","taskToUpdate","applyMiddleware","thunk","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.19db2d63.chunk.js","sourcesContent":["import React from 'react';\n\nconst HomePage = () => {\nconsole.log('process.env.NODE_ENV',process.env.NODE_ENV)\n\n    return (\n        <div>\n            <h1 style={{paddingTop: '50px', fontSize:'100px'}}>Home Page</h1>\n        </div>\n    )\n}\n\nexport default HomePage;","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nconst MainNav = () => {\n    return (\n        <nav className=\"main-navbar\">\n            <NavLink to=\"/\" className=\"main-navbar-nav-link\" exact activeClassName=\"active\">\n                Home </NavLink>\n                | <NavLink to=\"/boards\" className=\"main-navbar-nav-link\" exact activeClassName=\"active\">\n                Boards </NavLink>\n        </nav>\n    )\n}\n\nexport default MainNav","import { createSelector } from \"reselect\";\n\nconst currBoard = state => state.board.currBoard;\n\nexport const selectCurrBoard = createSelector(\n    currBoard,\n    board => board\n);\n","\r\nimport Axios from 'axios';\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n});\r\n\r\nexport default {\r\n    get(endpoint, data){\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data){\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data){\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data){\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\n\r\nasync function ajax(endpoint, method='get', data=null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data;\r\n    } catch (err) {\r\n        if (err.response.status === 401) {\r\n            console.log('ERROR: cannot find boards')\r\n            throw err;     \r\n        }\r\n        throw err;     \r\n    }\r\n}\r\n\r\n","export const utilService = {\n    makeId,\n    applyDrag,\n    reorder,\n    move\n}\n\nfunction applyDrag(arr, dragResult) {\n    const { removedIndex, addedIndex, payload } = dragResult\n    if (removedIndex === null && addedIndex === null) {\n        console.log('apply drag null');\n        return arr\n    }\n    const result = [...arr]\n\n    let itemToAdd = payload\n\n    if (removedIndex !== null) {\n        itemToAdd = result.splice(removedIndex, 1)[0]\n    }\n\n    if (addedIndex !== null) {\n        result.splice(addedIndex, 0, itemToAdd)\n    }\n    // console.log('handleDrop', result);\n    return result\n}\n\nfunction makeId(length = 5) {\n    var txt = '';\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    for (let i = 0; i < length; i++) {\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n    return txt;\n}\n\n function reorder (list, startIndex, endIndex) {\n    const result = Array.from(list);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n    return result;\n};\n\n// a little function to help us with moving an item between droppables\n\n function move (source, destination, droppableSource, droppableDestination) {\n    const sourceClone = Array.from(source);\n    const destClone = Array.from(destination);\n    const [removed] = sourceClone.splice(droppableSource.index, 1);\n    destClone.splice(droppableDestination.index, 0, removed);\n\n    const result = {};\n    result[droppableSource.droppableId] = sourceClone;\n    result[droppableDestination.droppableId] = destClone;\n    return result;\n};","import HttpService from './http.service.js'\nimport { utilService } from './util.service.js'\n\nexport const boardService = {\n    query,\n    getById,\n    update,\n    getEmptyList,\n    getEmptyTask,\n    getEmptyCheckList,\n    getEmptyListItem,\n    newActivity,\n    // save\n}\n\n\n// let board = {\n\n//     theme: 'white',\n//     id: 'board1',\n//     userId: '',\n//     users: [],\n//     activities: [\n//     ],\n\n//     labels: [\n//         {\n//             id: 'label1xa',\n//             title: 'a',\n//             color: '#61bd4f',\n//         },\n//         {\n//             id: 'label2xe',\n//             title: '',\n//             color: '#f2d600',\n//         },\n//         {\n//             id: 'label3qza',\n//             title: 'hii',\n//             color: '#ff9f1a',\n//         },\n//         {\n//             id: 'label4qpa',\n//             title: '',\n//             color: '#c377e0',\n//         },\n//         {\n//             id: 'label5uxa',\n//             title: '',\n//             color: '#eb5a46',\n//         },\n//         {\n//             id: 'label6wwe',\n//             title: '',\n//             color: '#055a8c',\n//         },\n//         {\n//             id: 'label7qioia',\n//             title: '',\n//             color: '#344563',\n//         },\n//         {\n//             id: 'label8aaza',\n//             title: '',\n//             color: '#00c2e0',\n//         },\n//         {\n//             id: 'label9wlza',\n//             title: '',\n//             color: '#ff78cb',\n//         },\n//     ],\n//     taskLists: [\n//         {\n//             id: 'list1',\n//             title: 'This is the list title',\n//             theme: 'white',\n//             tasks: [\n//                 {\n//                     taskListId: 'list1',\n//                     id: 'task1',\n//                     title: 'This is the task title',\n//                     description: 'This is the task description',\n//                     creatorId: '',\n//                     membersId: [],\n//                     comments: [],\n//                     dueDate: '',\n//                     labels: [],\n//                     isDone: false,\n//                     attachment: '',\n//                     checklists: []\n//                 },\n\n//                 {\n//                     taskListId: 'list1',\n//                     id: 'task2',\n//                     title: 'This is the task title',\n//                     description: 'This is the task description',\n//                     creatorId: '',\n//                     membersId: [],\n//                     comments: [],\n//                     dueDate: '',\n//                     labels: [],\n//                     isDone: false,\n//                     attachment: '',\n//                     checklists: []\n//                 },\n\n//                 {\n//                     taskListId: 'list1',\n//                     id: 'task3',\n//                     title: 'This is the task title',\n//                     description: 'This is the task description',\n//                     creatorId: '',\n//                     membersId: [],\n//                     comments: [],\n//                     dueDate: '',\n//                     labels: [],\n//                     isDone: false,\n//                     attachment: '',\n//                     checklists: []\n//                 },\n\n//                 {\n//                     taskListId: 'list1',\n//                     id: 'task4',\n//                     title: 'This is the task title',\n//                     description: 'This is the task description',\n//                     creatorId: '',\n//                     membersId: [],\n//                     comments: [],\n//                     dueDate: '',\n//                     labels: [],\n//                     isDone: false,\n//                     attachment: '',\n//                     checklists: []\n//                 },\n\n//             ]\n//         },\n//     ]\n\n// }\n\nfunction query() {\n    return HttpService.get('board')\n}\n\nasync function stall(stallTime = 3000) {\n    await new Promise(resolve => setTimeout(resolve, stallTime));\n  }\n\nasync function getById(id) {\n    const currBoard = await HttpService.get(`board/${id}`)\n    return currBoard\n}\n// function save(newBoard) {\n//     board = newBoard\n//     return JSON.parse(JSON.stringify(board))\n// }\n\n\nasync function update(board) {\n    // console.log('board');\n    // await stall(3000)\n    return HttpService.put(`board/${board._id}`, board)\n}\n\n\n\nfunction getEmptyList() {\n    return {\n        id: utilService.makeId(),\n        title: '',\n        theme: 'white',\n        tasks: []\n    }\n}\n\nfunction getEmptyTask() {\n    return {\n        id: utilService.makeId(),\n        title: '',\n        description: '',\n        creatorId: '',\n        membersId: [],\n        comments: [],\n        dueDate: '',\n        labels: [],\n        isDone: false,\n        images: [],\n        checklists: [],\n        cover: {\n            background: '',\n            isFull: null,\n            type: null\n        }\n    }\n}\nfunction getEmptyCheckList(title = 'Checklist') {\n    return {\n        id: utilService.makeId(),\n        title,\n        listItems: [],\n    }\n}\nfunction getEmptyListItem() {\n    return {\n        id: utilService.makeId(),\n        title: '',\n        isDone: false\n    }\n}\n\nfunction newActivity(cardTxt, boardTxt, taskId) {\n    return {\n        id: utilService.makeId(),\n        cardTxt, // text to display without link to the card\n        boardTxt, // text to display with link to the card\n        taskId,\n        date: Date.now()\n    }\n}\n\n// function getTaskById(taskId) {\n//     for (let i = 0; i < board.taskLists.length; i++) {\n//         var task = board.taskLists[i].tasks.find(task => task.id === taskId)\n//         if (task) {\n//             return task\n//         }\n//     }\n// }\n","import io from 'socket.io-client';\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/'\r\n    : '//localhost:3030'\r\nvar socket;\r\n\r\nexport const socketService = {\r\n    setup,\r\n    terminate,\r\n    on,\r\n    off,\r\n    emit\r\n}\r\n\r\nfunction setup() {\r\n    socket = io(BASE_URL);\r\n}\r\n\r\nfunction terminate() {\r\n    socket = null;\r\n}\r\n\r\nfunction on(eventName, cb) {\r\n\r\n    socket.on(eventName, cb)\r\n}\r\n\r\nfunction off(eventName, cb) {\r\n    if (socket) {\r\n        socket.off(eventName, cb)\r\n    }\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n    if (socket) {\r\n        socket.emit(eventName, data);\r\n    }\r\n}","\nimport { boardService } from '../../services/board.service.js';\nimport { socketService } from '../../services/socket.service.js';\n\n\nexport function loadBoards() {\n    return async dispatch => {\n        const boards = await boardService.query()\n        if (boards) {\n            dispatch({ type: 'SET_BOARDS', boards })\n        }\n    }\n}\n\nexport function getBoardById(id) {\n    return async dispatch => {\n        try {\n            const currBoard = await boardService.getById(id)\n            dispatch({ type: 'SET_BOARD', currBoard })\n        } catch (err) {\n            console.warn('cannot save board', err)\n            throw err\n        }\n\n    }\n\n}\n\nexport function saveBoard(updatedBoard) {\n    return async dispatch => {\n        const boardCopy = JSON.parse(JSON.stringify(updatedBoard));\n         boardCopy.activities = []\n        // dispatch({ type: 'SET_BOARD', currBoard: boardCopy })\n        const savedBoard = await boardService.update(boardCopy)\n        console.log('afte boarrd saved', savedBoard);\n        dispatch({ type: 'SET_BOARD', currBoard: savedBoard })\n        socketService.emit('update board', savedBoard);\n    }\n}\nexport function setCurrBoard(updatedBoard) {\n    return dispatch => {\n        dispatch({ type: 'SET_BOARD', currBoard: updatedBoard })\n    }\n}\n\nexport function loadTask(id) {\n    return async (dispatch, getState) => {\n        await dispatch({ type: 'SET_TASK', id });\n        return getState().board.currTask\n    }\n}\n\nexport function updateTask(task) {\n    return dispatch => {\n        dispatch({ type: 'UPDATE_TASK', currTask: task });\n    }\n}\n\nexport function toggleLabels() {\n    return dispatch => {\n        dispatch({ type: 'TOGGLE_LABELS' });\n    }\n}\n\n\n\n\n\n// export function saveBoard(updatedBoard) {\n//     return async dispatch => {\n//         dispatch({ type: 'SET_BOARD', currBoard: updatedBoard })\n\n//         await boardService.update(updatedBoard)\n//     }\n// }\n// export function saveBoard(updatedBoard) {\n//     console.log('saveeborad', updatedBoard);\n//     const boardCopy = JSON.parse(JSON.stringify(updatedBoard));\n//     const savedBoard = boardService.save(boardCopy)\n//     return async dispatch => {\n//         dispatch({ type: 'SET_BOARD', currBoard: savedBoard })\n//     }\n// }\n\n\n    // export function loadTask(taskId) {\n    //     state.board.taskLists.forEach(taskList => {\n    //         const task = taskList.tasks.find(task => task.id === taskId)\n    //         if (task) {\n    //             dispatch({ type: 'SET_TASK', currTask: task })\n    //         }\n    //     })\n\n    // }\n\n\n    //   function updateTaskList(taskList) {\n    //     const boardCopy = JSON.parse(JSON.stringify(state.board));\n    //     const idx = boardCopy.taskLists.findIndex(currList => currList.id === taskList.id)\n    //     boardCopy.taskLists.splice(idx, 1, taskList)\n    //     saveBoard(boardCopy)\n    //   }\n\n    //   function removeTaskList(taskListId) {\n\n    //     const boardCopy = JSON.parse(JSON.stringify(state.board));\n    //     const idx = boardCopy.taskLists.findIndex(currList => currList.id === taskListId)\n    //     boardCopy.taskLists.splice(idx, 1)\n    //     saveBoard(boardCopy)\n    //   }\n\n    //   function updateTask(task) {\n    //     dispatch({ type: 'SET_TASK', currTask: task })\n    //     const boardCopy = JSON.parse(JSON.stringify(state.board))\n    //     boardCopy.taskLists.forEach(taskList => {\n    //       let idx = taskList.tasks.findIndex(currTask => currTask.id === task.id)\n    //       if (idx !== -1) {\n    //         taskList.tasks.splice(idx, 1, task)\n    //       }\n    //     })\n    //     saveBoard(boardCopy)\n    //   }\n\n\n    // console.log('state board after', state.board);\n\n\n\n","import React, { useState } from 'react';\nimport { IoMdAdd } from 'react-icons/io';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { toggleLabels } from '../../../store/actions/boardActions';\n\n\nconst LabelList = ({ labels, onLabelClicked = null, expandMode }) => {\n    const dispatch = useDispatch()\n    const isExpanded = useSelector(state => state.board.isExpanded)\n\n    const handleClick = (ev) => {\n        ev.preventDefault();\n        if (onLabelClicked !== null) {\n            onLabelClicked(ev)\n        } else {\n            dispatch(toggleLabels()) // Using the store here to toggle all the labels in the board\n        }\n    }\n    return (\n\n        <div className=\"labels-list\">\n            {labels.map(label => (\n                <span\n                    onClick={handleClick}\n                    key={label.id}\n                    className={`label  ${isExpanded || expandMode ? 'label-expand' : ''}`}\n                    style={{ backgroundColor: label.color }}>\n                    <span className=\"label-title\">{label.title}</span>\n                </span>\n            ))}\n            {expandMode &&\n                <button className='modal-btn'  onClick={handleClick} >\n                    <IoMdAdd className=\"icon-md\" />\n                </button>}\n        </div>\n    )\n}\n\nexport default LabelList\n","import React, { useMemo } from 'react'\nimport { NavLink, useRouteMatch } from 'react-router-dom'\nimport LabelList from './task-actions/LabelList'\nimport Moment from 'react-moment';\nimport { Draggable } from 'react-beautiful-dnd';\nimport styled from 'styled-components'\nimport { createSelector } from 'reselect'\nimport { IoMdCheckboxOutline } from \"react-icons/io\";\nimport { GrTextAlignFull } from \"react-icons/gr\";\nimport { RiTimeLine } from \"react-icons/ri\";\n\n\nconst Container = styled.div`\n    ${props => props.cover.isFull ?\n        (props.cover.type === 'color' ?\n            { backgroundColor: props.cover.isFull ? props.cover.background : '' } :\n            { backgroundImage: 'url(' + props.cover.background + ')', minHeight: 235, backgroundSize: 'cover' }) : ''}\n            font-size:${props => props.cover.isFull ? '16px' : ''};\n            font-family:${props => props.cover.isFull ? 'LatoBold' : ''};\n\n            ${props => props.cover.isFull ?\n        {\n            display: 'flex',\n            fontSize: '16px',\n            fontFamily: 'LatoBold'\n        } :\n        ''}\n    `;\n\n\nconst calendarStrings = {\n    lastDay: '[Yesterday]',\n    sameDay: '[Today]',\n    nextDay: '[Tomorrow]',\n    sameElse: 'MMMM D'\n};\n\nconst TaskPreview = ({ task, index }) => {\n    let { url } = useRouteMatch();\n\n    const doneCount = useMemo(\n        () =>\n            task.checklists.reduce((totalCount, checklist) => {\n                if (checklist.listItems.length > 0) {\n                    let checklistSum = checklist.listItems.reduce((acc, item) => {\n                        if (item.isDone) acc++\n                        return acc\n                    }, 0)\n                    totalCount += checklistSum\n                }\n                return totalCount\n            }, 0),\n        [task.checklists]\n    );\n    const checklistItemsAmount = useMemo(\n        () =>\n            task.checklists.reduce((acc, checklist) => {\n                if (checklist.listItems.length > 0) {\n                    acc += checklist.listItems.length\n                }\n                return acc\n            }, 0),\n        [task.checklists]\n    );\n\n    const isDue = useMemo(() => {\n        if (!task.dueDate) return;\n        console.log('is due')\n        let date = new Date()\n        date.setHours(0, 0, 0, 0)\n        date.setDate(date.getDate() + 1)\n        if (date.getTime() === task.dueDate) {\n            return 'due-soon'\n        } else if (task.dueDate <= Date.now()) {\n            return 'over-due'\n        } else return ''\n        // }\n    }, [task.dueDate]);\n\n    return (\n\n        <Draggable draggableId={task.id} index={index} type=\"task\">\n\n            {provided => (\n                <div\n                    className='task-preview'\n                    {...provided.draggableProps}\n                    {...provided.dragHandleProps}\n                    ref={provided.innerRef}>\n                    <NavLink to={`${url}/${task.id}`} className='task-link' activeClassName='active' draggable='false'>\n                        <Container cover={task.cover}>\n                            {(task.cover.background && !task.cover.isFull) &&\n                                <div>\n                                    {task.cover.type === 'color' ?\n                                        <div\n                                            className={task.cover.background ? 'task-cover' : ''}\n                                            style={{ backgroundColor: task.cover.background }}\n                                        ></div> :\n                                        <img src={task.cover.background} className='task-img-cover ratio-square ' />}\n                                </div>}\n                            <div className={`task-preview-content \n                                    ${(task.cover.type === 'img' && task.cover.isFull) ?\n                                    (task.cover.theme === 'dark' ? 'content-wrapper dark' : 'content-wrapper light') : ''}`}>\n\n                                {task.labels && <LabelList labels={task.labels} />}\n                                <div className='task-preview-title' dir='auto'>{task.title}</div>\n                                <div className='badges'>\n                                    {task.dueDate &&\n                                        <div className={'badge ' + isDue}>\n                                            <RiTimeLine className=\"icon-sm\" />\n                                            <Moment className='badge-text' calendar={calendarStrings} date={task.dueDate} />\n                                        </div>\n                                    }\n                                    {task.description &&\n                                        <div className=\"badge\">\n                                            <GrTextAlignFull className=\"icon-md\" />\n                                        </div>\n                                    }\n                                    {task.checklists.length > 0 && checklistItemsAmount > 0 &&\n                                        <div className={'badge checklist-items-badge ' + (doneCount === checklistItemsAmount ? 'task-complete' : '')}>\n\n                                            <IoMdCheckboxOutline className=\"icon-sm\" />\n                                            <span className='badge-text'>{doneCount}/{checklistItemsAmount}</span>\n                                        </div>}\n\n                                </div>\n\n                            </div>\n                        </Container>\n                    </NavLink>\n\n                </div>\n\n            )}\n\n        </Draggable>\n    )\n}\nexport default TaskPreview\n","import { useState, useEffect } from \"react\";\n\n// Hook\nfunction useKeyPress(targetKey) {\n  // State for keeping track of whether key is pressed\n  const [keyPressed, setKeyPressed] = useState(false);\n\n  // If pressed key is our target key then set to true\n  function downHandler({ key }) {\n    if (key === targetKey) {\n      setKeyPressed(true);\n    }\n  }\n\n  // If released key is our target key then set to false\n  const upHandler = ({ key }) => {\n    if (key === targetKey) {\n      setKeyPressed(false);\n    }\n  };\n\n  // Add event listeners\n  useEffect(() => {\n    window.addEventListener(\"keydown\", downHandler);\n    window.addEventListener(\"keyup\", upHandler);\n    // Remove event listeners on cleanup\n    return () => {\n      window.removeEventListener(\"keydown\", downHandler);\n      window.removeEventListener(\"keyup\", upHandler);\n    };\n  }, []); // Empty array ensures that effect is only run on mount and unmount\n\n  return keyPressed;\n}\n\nexport default useKeyPress;\n","// hook from https://usehooks.com/useOnClickOutside/\nimport { useEffect } from \"react\";\n\n// Hook\nfunction useOnClickOutside(ref, handler, exceptionalRef = null) {\n\n  useEffect(\n    () => {\n      const listener = event => {\n        if (!ref) return;\n        // Do nothing if clicking ref's element or descendent elements\n        if (!ref.current || ref.current.contains(event.target)) {\n          // console.log('Refsdasd')\n          return;\n        }\n        // Do nothing if  ANOTHER clicking ref's element or descendent elements \n        if (exceptionalRef !== null) {\n          if (!exceptionalRef.current || exceptionalRef.current.contains(event.target)) {\n            console.log('exceptionalRef', exceptionalRef)\n            return\n          }\n        }\n        handler(event);\n      };\n\n      document.addEventListener(\"mousedown\", listener);\n      document.addEventListener(\"touchstart\", listener);\n\n      return () => {\n        document.removeEventListener(\"mousedown\", listener);\n        document.removeEventListener(\"touchstart\", listener);\n      };\n    },\n    // Add ref and handler to effect dependencies\n    // It's worth noting that because passed in handler is a new ...\n    // ... function on every render that will cause this effect ...\n    // ... callback/cleanup to run every render. It's not a big deal ...\n    // ... but to optimize you can wrap handler in useCallback before ...\n    // ... passing it into this hook.\n    [ref, exceptionalRef, handler]\n  );\n}\n\nexport default useOnClickOutside;\n","import React, { useState, useEffect, useRef } from 'react'\nimport useKeyPress from '../hooks/useKeypress'\nimport useOnClickOutside from '../hooks/useOnClickOutSide'\n\nconst TextEditor = (props) => {\n    const {\n        type,\n        text,\n        name,\n        onInputBlur,\n        isWide,\n        isFocused,\n        onChange,\n        onSubmit,\n        onEscape,\n        placeholder = null,\n    } = props\n    // const [textCopy, setText] = useState(text)\n    const [isEditing, setIsEditing] = useState(false)\n    const [initialText, setInitialText] = useState('')\n    const inputEl = useRef(null)\n\n    const enter = useKeyPress(\"Enter\");\n    const esc = useKeyPress(\"Escape\");\n\n\n    useEffect(() => {\n        if (isEditing) {\n            inputEl.current.focus()\n        }\n    }, [isEditing])\n\n\n\n    useEffect(() => {\n        if (isFocused) {\n            setIsEditing(true)\n        }\n        // Check whether or not to change the isEditing state from the parent component (for bluring the input)\n        if (isFocused === false) {\n\n            setIsEditing(false)\n        }\n    }, [isFocused, isEditing]);\n\n    useEffect(() => {\n        if (isEditing) {\n            setInitialText(text)\n        }\n    }, [isEditing]) // when input is focused save the initial text\n\n\n    useEffect(() => {\n        if (isEditing && !isWide) { // if input is focused and not textarea\n            // if Enter is pressed, save the text and case the editor\n            if (enter) {\n                if (onInputBlur) {\n                    onInputBlur()\n                } else {\n                    onSubmit()\n                }\n                setIsEditing(false);\n            }\n            // if Escape is pressed, revert the text and close the editor\n            if (esc) {\n                const customEv = {\n                    target: {\n                        name: name,\n                        value: initialText\n                    },\n                }\n                onChange(customEv)\n                setIsEditing(false);\n                if (onEscape) {\n                    onEscape()\n                }\n            }\n        }\n    }, [enter, esc]); // watch the Enter and Escape key presses\n\n    const ModuleText = React.createElement(\n        type,\n        {\n            className: `module-text  ${text ? '' : 'placeholder'}`,\n            dir: 'auto',\n            onClick: () => { setIsEditing(true) }\n        },\n        text ? text : placeholder\n    );\n\n\n    const updateText = () => {\n        if (onInputBlur) {\n            console.log('blur');\n            setIsEditing(false)\n            onInputBlur()\n        }\n    }\n    const test = (ev) => {\n        const reg = /^\\s+$/; // check for whitespace \n        const inputVal = ev.target.value;\n        if (reg.test(inputVal) || inputVal === '') {\n            return\n        } else {\n            onChange(ev)\n        }\n    }\n    const handleTextareaChange = (ev) => {\n        onChange(ev)\n    }\n    const focusInput = () => {\n        if (!isEditing) {\n            setIsEditing(true)\n            setTimeout(() => {\n                inputEl.current.focus();\n            }, 0)\n\n        }\n    }\n    return (\n        <div className=\"text-editor-wrapper\">\n            {\n                isEditing ?\n                    (!isWide ?\n                        <input dir=\"auto\" type=\"text\" ref={inputEl} autoFocus className=\"focusClass\" name={name} defaultValue={text} onChange={test} onBlur={updateText} /> :\n                        <textarea ref={inputEl} className=\"focusClass\" autoFocus rows=\"5\" name={name} defaultValue={text} onChange={handleTextareaChange} onBlur={updateText} placeholder={placeholder} />) :\n                    ModuleText\n            }\n\n        </div>\n    )\n}\n\nexport default TextEditor\n","import React from 'react'\nimport { RiCloseLine } from \"react-icons/ri\";\n\nconst ListMenu = ({ onCloseMenu, onRemoveList,onAddTask }) => {\n    return (\n        <div className=\"pop-up list-menu\">\n            <div className=\"pop-up-header\">\n                <span className=\"pop-up-title\">Labels</span>\n                <button className=\"pop-up-close-btn clear-btn\" onClick={() => onCloseMenu()}>\n                    <RiCloseLine />\n                </button>\n            </div>\n            <div onClick={onAddTask} >Add card</div>\n            <div>Change list color</div>\n            <div>Sort list by</div>\n            <div onClick={onRemoveList}>Delete list</div>\n        </div>\n    )\n}\n\nexport default ListMenu\n","import React, { useEffect, useState, useRef } from 'react'\nimport { BsThreeDots } from \"react-icons/bs\";\nimport { Droppable } from \"react-beautiful-dnd\";\n\nimport TaskPreview from './TaskPreview'\nimport TextEditor from '../TextEditor'\nimport ListMenu from './ListMenu';\nimport { boardService } from '../../services/board.service';\nimport useOnClickOutside from '../../hooks/useOnClickOutSide';\nimport { RiCloseLine, RiAddLine } from 'react-icons/ri';\nimport { useRouteMatch } from 'react-router-dom';\n\n\n\n\nconst TaskList = ({ provided, innerRef, taskList, taskListIdx, onListUpdated, onRemoveList }) => {\n\n    const [taskListCopy, setTaskListCopy] = useState({ ...taskList })\n    const [newTask, setNewTask] = useState(null)\n    const [isEditing, setIsEditing] = useState(false)\n    let { url } = useRouteMatch();\n\n    const [isMenuOpen, setIsMenuOpen] = useState(false)\n    const wrapperRef = useRef(null)\n\n    useEffect(() => {\n        setTaskListCopy({ ...taskList })\n    }, [taskList])\n\n\n    const getEmptyTask = () => {\n        setIsMenuOpen(false)\n        const emptyTask = boardService.getEmptyTask()\n        setNewTask(emptyTask)\n        setIsEditing(true)\n    }\n\n    const handleListChange = (ev) => {\n        setTaskListCopy({ ...taskListCopy, [ev.target.name]: ev.target.value })\n    }\n\n    const handleTaskChange = (ev) => {\n        setNewTask({ ...newTask, [ev.target.name]: ev.target.value })\n\n    }\n    const handleListRemove = () => {\n        onRemoveList(taskList.id)\n    }\n    const updateList = (updatedTaskList, newActivity) => {\n        if (updatedTaskList) {\n            onListUpdated(updatedTaskList, newActivity)\n        } else {\n            if (taskListCopy.title === taskList.title) return;\n            onListUpdated(taskListCopy)\n        }\n        setIsEditing(false)\n        setNewTask(null)\n    }\n\n    const addTask = async (clickSource = null) => {\n        if (newTask && newTask.title) {\n            const updatedTaskList = JSON.parse(JSON.stringify(taskListCopy));\n            updatedTaskList.tasks.push(newTask)\n            const newActivity = boardService.newActivity(\n                `Added this card to ${updatedTaskList.title}`,\n                `Added  <a href=\"#${url}/${newTask.id}\">${newTask.title}</a> to ${updatedTaskList.title}`,\n                newTask.id\n            )\n            await updateList(updatedTaskList, newActivity)\n            if (clickSource === 'clickedOutside') return; // if click is outside the ref wrapper end editing\n            setNewTask(null)\n            getEmptyTask()\n        }\n    }\n\n    useOnClickOutside(wrapperRef, () => {\n        if (isEditing && newTask && newTask.title) {\n            addTask('clickedOutside') // passing this string to add the current task and end the editing\n        } else {\n            stopEditing()\n        }\n    });\n    const stopEditing = () => {\n        setNewTask(null)\n        setIsEditing(false)\n    }\n\n\n\n    return (\n        taskListCopy &&\n        <div className=\"list-wrapper\"\n            ref={innerRef}\n            {...provided.draggableProps}\n        >\n            <div className=\"list\">\n                <div className=\"list-header\" {...provided.dragHandleProps}>\n                    {taskListCopy.title &&\n                        <TextEditor\n                            name=\"title\"\n                            type=\"h3\"\n                            text={taskListCopy.title}\n                            onChange={handleListChange}\n                            onInputBlur={updateList}\n                        />}\n                    <button className=\"list-menu-btn clear-btn\" onClick={() => setIsMenuOpen(!isMenuOpen)}>\n                        <BsThreeDots />\n                    </button>\n                    {isMenuOpen && !isEditing && <ListMenu onRemoveList={handleListRemove} onAddTask={getEmptyTask} onCloseMenu={() => setIsMenuOpen(false)} />}\n                </div>\n                <div className=\"overs\">\n                    <Droppable type=\"task\" droppableId={`${taskListIdx}`}>\n                        {provided => (\n\n\n                            <div className=\"list-content custom-scrollbar\" ref={provided.innerRef} >\n                                {taskList.tasks.map((task, index) => (\n                                    <TaskPreview key={task.id} task={task} index={index} />\n                                ))}\n                                {(isEditing && newTask) && <div className=\"add-task-wrapper \" ref={wrapperRef}>\n                                    <TextEditor\n                                        name=\"title\"\n                                        type=\"p\"\n                                        text={newTask.title}\n                                        onChange={handleTaskChange}\n                                        isFocused={isEditing}\n                                        onSubmit={addTask}\n                                        onEscape={stopEditing}\n                                    />\n\n                                    <div className=\"add-task-controls\">\n                                        <button onClick={addTask} className=\"submit-btn\">Add task</button>\n                                        <button onClick={stopEditing} className=\"clear-btn icon-lg\">\n                                            <RiCloseLine />\n                                        </button>\n                                    </div>\n\n                                </div>}\n                                {/* </div> */}\n                                {provided.placeholder}\n\n                            </div>\n                        )}\n                    </Droppable>\n                </div>\n\n                <div className=\"list-footer\">\n                    {(!isEditing && !newTask) &&\n                        <a className=\"clear-btn list-footer-btn\" onClick={getEmptyTask}  >\n                            <span className=\"icon-lg add-icon\"><RiAddLine /></span> <span>Add new task</span>\n                        </a >\n                    }\n                </div>\n            </div>\n        </div >\n\n    )\n}\n\nexport default TaskList\n","import React, { useRef, useState } from 'react'\n\nimport { RiCloseLine } from \"react-icons/ri\";\nimport { GoPencil } from \"react-icons/go\";\n\nimport TextEditor from '../../TextEditor';\nimport { useEffect } from 'react';\nimport useOnClickOutside from '../../../hooks/useOnClickOutSide';\n\n\nconst LabelPicker = ({ task, labels, onCloseModal, onTaskUpdated, labelsUpdated, bounds, exceptionRef }) => {\n    const [selectedLabel, setSelectedLabel] = useState(null)\n    const [isEditing, setIsEditing] = useState(false)\n    const wrapperRef = useRef(null)\n\n    useOnClickOutside(wrapperRef, () => {\n        onCloseModal()\n    }, exceptionRef);\n\n    const selectLabelToEdit = (label) => {\n        if (selectedLabel !== null && selectedLabel.id === label.id) {\n            setIsEditing(false)\n        } else {\n            setSelectedLabel({ ...label })\n            setIsEditing(true)\n        }\n    }\n\n    const handleChange = (ev) => {\n        setSelectedLabel({ ...selectedLabel, [ev.target.name]: ev.target.value })\n    }\n    const updateLabel = () => {\n        const labelsCopy = [...labels];\n        const labelIdx = labelsCopy.findIndex(label => label.id === selectedLabel.id)\n        labelsCopy.splice(labelIdx, 1, selectedLabel)\n        labelsUpdated([...labelsCopy], selectedLabel)\n        setIsEditing(false);\n        setSelectedLabel(null)\n    }\n\n    useEffect(() => {\n        if (!isEditing && selectedLabel) {\n            const taskCopy = JSON.parse(JSON.stringify(task));\n            const taskLabelIdx = taskCopy.labels.findIndex(label => label.id === selectedLabel.id)\n            if (taskLabelIdx !== -1) {\n                taskCopy.labels.splice(taskLabelIdx, 1, selectedLabel)\n                onTaskUpdated(taskCopy)\n            }\n        }\n\n    }, [isEditing])\n\n\n    const toggleLabels = (selectedLabel) => {\n        let labelExist;\n        const taskCopy = JSON.parse(JSON.stringify(task));\n        labelExist = taskCopy.labels.find(label => label.id === selectedLabel.id)\n        if (!labelExist) {\n            taskCopy.labels.push(selectedLabel)\n        } else {\n            const idx = taskCopy.labels.findIndex(label => label.id === selectedLabel.id)\n            taskCopy.labels.splice(idx, 1)\n        }\n        onTaskUpdated(taskCopy)\n    }\n\n    const labelToEdit = (label) => {\n        if (selectedLabel) {\n            // console.log(label.id === selectedLabel.id)\n            return label.id === selectedLabel.id\n        }\n    }\n    return (\n\n        <div className=\"pop-up labels\" ref={wrapperRef} style={bounds}>\n            <div className=\"pop-up-header\">\n                <span className=\"pop-up-title\">Labels</span>\n                <button className=\"pop-up-close-btn clear-btn icon-lg\" onClick={onCloseModal}>\n                    <RiCloseLine />\n                </button>\n            </div>\n            <ul>\n                {labels.map(label => (\n                    <li className=\"label-container\" key={label.id}>\n                        <span\n                            className=\"card-label\"\n                            style={{ backgroundColor: label.color }}\n                            onClick={() => toggleLabels(label)}\n                        >\n                            {!labelToEdit(label) && <span className=\"label-title\">{label.title}</span>}\n                            {labelToEdit(label) && isEditing && <TextEditor\n                                type=\"p\"\n                                name=\"title\"\n                                isFocused={isEditing}\n                                text={label.title}\n                                onChange={handleChange}\n                                onInputBlur={updateLabel}\n                            />}\n                            <span className=\"label-selected\">\n                            </span>\n                        </span>\n                        <button className=\"clear-btn\" onClick={() => selectLabelToEdit(label)}>\n                            <GoPencil />\n                        </button>\n                    </li>\n                ))}\n            </ul>\n        </div>\n    )\n}\n\nexport default LabelPicker\n","import React, { useEffect, useState, useRef } from 'react'\nimport { useHistory, useRouteMatch } from 'react-router-dom';\n\nimport moment from 'moment'\nimport { RiCloseLine } from 'react-icons/ri'\nimport Calendar from 'react-calendar'\nimport 'react-calendar/dist/Calendar.css';\n\nimport { boardService } from '../../../services/board.service';\nimport useOnClickOutside from '../../../hooks/useOnClickOutSide';\n\nconst DatePicker = ({ task, onTaskUpdated, onCloseModal, bounds, exceptionRef }) => {\n    const [value, setDate] = useState(new Date());\n    let { url } = useRouteMatch();\n    const wrapperRef = useRef(null)\n\n    useEffect(() => {\n        if (task.dueDate) {\n            const date = new Date(task.dueDate)\n            setDate(date)\n        }\n    }, [])\n\n\n    useOnClickOutside(wrapperRef, () => {\n        onCloseModal()\n    }, exceptionRef);\n\n    const createActivity = (timestamp, isRemoveActivity = null) => {\n        const dueDate = moment(new Date(timestamp)).format(\"MMM Do\");\n        if (task.dueDate) {\n            return boardService.newActivity(\n                `Changed the due date of this card to  ${dueDate}`,\n                `Changed <a href=\"#${url}\">${task.title}</a> to be due at ${dueDate}`,\n                task.id\n            )\n        } else if (isRemoveActivity) {\n            return boardService.newActivity(\n                `Removed the due date from this card`,\n                `Removed <a href=\"${url}\">${task.title}</a> due date`,\n                task.id\n            )\n        } else {\n            return boardService.newActivity(\n                `Set this card to be due at ${dueDate}`,\n                `Set <a href=\"${url}\">${task.title}</a> to be due at ${dueDate} `,\n                task.id\n            )\n        }\n    }\n\n\n\n    const submitDate = async () => {\n        const timestamp = value.getTime();\n        if (timestamp === task.dueDate) return;\n        const taskCopy = JSON.parse(JSON.stringify(task));\n        taskCopy.dueDate = timestamp\n        const newActivity = createActivity(timestamp)\n        await onTaskUpdated(taskCopy, newActivity)\n        onCloseModal()\n    }\n\n\n    const onChangeDate = (date) => {\n        setDate(date)\n    }\n    return (\n        <div className=\"pop-up\" style={bounds} ref={wrapperRef}>\n            <div className=\"pop-up-header\">\n                <span className=\"pop-up-title\">Date</span>\n                <button onClick={onCloseModal} className=\"pop-up-close-btn clear-btn icon-lg\">\n                    <RiCloseLine />\n                </button>\n            </div>\n            <Calendar\n                onChange={onChangeDate}\n                value={value}\n            />\n            <button onClick={submitDate} className=\"submit-btn add-date-btn\">Save</button>\n        </div>\n    )\n}\n\nexport default DatePicker\n","\n\n// Dispatching this action to determine wether or not to start editing in TaskChecklist cmp on initial render\nexport function toggleInitialAddition(isInitial) {\n    return dispatch => {\n        dispatch({ type: 'TOGGLE_INITIAL_ADDITION', isInitial });\n    }\n}","import React, { useEffect, useState } from 'react'\nimport TextEditor from '../../../TextEditor'\nimport { boardService } from '../../../../services/board.service'\nimport useOnClickOutside from '../../../../hooks/useOnClickOutSide'\nimport { useRef } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { toggleInitialAddition } from '../../../../store/actions/generalAction';\nimport { useRouteMatch } from 'react-router-dom'\nconst ChecklistPicker = ({ task, onTaskUpdated, onCloseModal, bounds, sidebarRef }) => {\n    const [checklist, setChecklist] = useState({})\n    const wrapperRef = useRef(null)\n    const { url } = useRouteMatch();\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        const emptyChecklist = boardService.getEmptyCheckList();\n        setChecklist({ ...emptyChecklist })\n    }, [])\n\n    useOnClickOutside(wrapperRef, () => {\n        onCloseModal()\n    }, sidebarRef);\n\n    const handleChange = (ev) => {\n        setChecklist({ ...checklist, [ev.target.name]: ev.target.value })\n    }\n    const addChecklist = () => {\n        const taskCopy = JSON.parse(JSON.stringify(task));\n        const checklistCopy = { ...checklist }\n        taskCopy.checklists.push(checklistCopy)\n        const newActivity = boardService.newActivity(\n            `Added ${checklist.title}  on this card`,\n            `Added ${checklist.title} on <a href=\"#${url}\">${task.title}</a>`,\n            task.id\n        )\n        onTaskUpdated(taskCopy, newActivity)\n        dispatch(toggleInitialAddition(true)) // Dispatching this action to start editing on TaskChecklist cmp \n        onCloseModal()\n    }\n    return (\n        <div className=\"pop-up\" style={bounds} ref={wrapperRef}>\n            <div className=\"pop-up-header\">\n                <span className=\"pop-up-title\">Add checklist</span>\n                <button className=\"pop-up-close-btn clear-btn\">\n                </button>\n            </div>\n            <TextEditor\n                isFocused={true}\n                onChange={handleChange}\n                onSubmit={addChecklist}\n                type=\"p\"\n                name=\"title\"\n            />\n            <button onClick={addChecklist} className=\"submit-btn add-date-btn\">Save</button>\n        </div>\n    )\n}\n\nexport default ChecklistPicker\n","export default {\r\n    uploadImg\r\n}\r\n\r\nfunction uploadImg(ev) {\r\n    console.log('yes');\r\n    const CLOUD_NAME = \"dhz1jk4k6\"\r\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', ev.target.files[0])\r\n    formData.append('upload_preset', 'jtim2mm3');\r\n\r\n    return fetch(UPLOAD_URL, {\r\n        method: 'POST',\r\n        body: formData\r\n    })\r\n        .then(res => res.json())\r\n        .then(res => {\r\n            return res\r\n        })\r\n        .catch(err => console.error(err))\r\n}\r\n\r\n","import React, { useRef } from 'react'\nimport { RiCloseLine } from 'react-icons/ri'\nimport { useState } from 'react'\nimport styled from 'styled-components'\nimport ScaleLoader from \"react-spinners/ScaleLoader\";\nimport Color, { Palette } from \"color-thief-react\";\n\nimport cloudinaryService from '../../../services/cloudinary.service';\nimport { utilService } from '../../../services/util.service';\nimport useOnClickOutside from '../../../hooks/useOnClickOutSide';\n\n\nconst HalfBgcWrapper = styled.div`\n${props => props.cover.type === 'color' ?\n        { backgroundColor: props.cover.background } :\n        { backgroundImage: \"url(\" + props.cover.background + \")\", backgroundSize: 'cover' }}\n`;\n\n\nconst FullBgcWrapper = styled.div`\n${props => props.cover.type === 'color' ?\n        { backgroundColor: props.cover.background } :\n        {\n            backgroundImage: props.cover.theme === 'light' ?\n                'linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)),url(' + props.cover.background + ')'\n                : 'linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),url(' + props.cover.background + ')', backgroundSize: 'cover', backgroundPosition: '50%'\n        }\n\n    }\n`;\n\nconst CoverPicker = ({ task, onCloseModal, onTaskUpdated, bounds, exceptionRef }) => {\n    const [selectedCover, setSelectedCover] = useState(task.cover)\n    const [loading, setLoading] = useState(false);\n\n    const wrapperRef = useRef(null)\n    \n    useOnClickOutside(wrapperRef, () => {\n        onCloseModal()\n    }, exceptionRef);\n\n    const coverColors = [\n        '#61bd4f',\n        '#f2d600',\n        '#ff9f1a',\n        '#c377e0',\n        '#eb5a46',\n        '#055a8c',\n        '#705cc1',\n        '#00c2e0',\n        '#ff78cb',\n    ]\n    const handleSelected = (cover) => {\n        const taskCopy = { ...task }\n        if (cover.id) {\n            setSelectedCover({ ...selectedCover, background: cover.url, type: 'img' })\n            taskCopy.cover.type = 'img'\n            taskCopy.cover.background = cover.url\n        } else {\n            setSelectedCover({ ...selectedCover, background: cover, type: 'color' })\n            taskCopy.cover.type = 'color'\n            taskCopy.cover.background = cover\n        }\n        onTaskUpdated(taskCopy)\n    }\n    const handleLayout = (isFull) => {\n        if (!task.cover.background) return;\n        setSelectedCover({ ...selectedCover, isFull: isFull })\n        const taskCopy = { ...task }\n        taskCopy.cover.isFull = isFull\n        onTaskUpdated(taskCopy)\n    }\n    const handleThemeChange = (theme) => {\n        if (theme === selectedCover.theme) return;\n        setSelectedCover({ ...selectedCover, theme: theme })\n        const taskCopy = { ...task }\n        taskCopy.cover.theme = theme\n        onTaskUpdated(taskCopy)\n    }\n    const handleUpload = async (ev) => {\n        console.log('yes mame');\n        setLoading(true);\n        const res = await cloudinaryService.uploadImg(ev);\n        const { url } = res;\n        setSelectedCover({ ...selectedCover, background: url, type: 'img' })\n        const taskCopy = { ...task }\n        const img = { id: utilService.makeId(), url: url, isCover: true }\n        taskCopy.images.push(img)\n        taskCopy.cover.background = url\n        taskCopy.cover.type = 'img'\n        onTaskUpdated(taskCopy)\n        setLoading(false);\n    }\n    const handleRemove = () => {\n        setSelectedCover({ ...selectedCover, background: null, type: null, isFull: null, theme: null })\n        const taskCopy = { ...task }\n        taskCopy.cover = { ...taskCopy.cover, background: null, type: null, isFull: null, theme: null }\n        // console.log('task', taskCopy);\n        onTaskUpdated(taskCopy)\n        onCloseModal()\n    }\n    return (\n\n        <div className={`pop-up cover-picker ${bounds ? '' : 'absolute'}`} ref={wrapperRef} style={bounds}>\n            <div className=\"pop-up-header\">\n                <span className=\"pop-up-title\">Cover</span>\n                <button className=\"pop-up-close-btn clear-btn icon-lg\" onClick={onCloseModal}>\n                    <RiCloseLine />\n                </button>\n            </div>\n            <span className=\"pop-up-title\">Size</span>\n            <div className=\"cover-size-picker\">\n                <FullBgcWrapper\n                    cover={selectedCover}\n                    className={'cover-size ' + (task.cover.background ? (selectedCover.isFull ? 'selected' : '') : 'disabled')}\n                    onClick={() => handleLayout(true)}\n                >\n                    <div className={`line-wrapper ${task.cover.type === 'img' ? (task.cover.theme === 'dark' ? 'dark' : '') : ''}`}>\n                        <div className=\"line line1\"></div>\n                        <div className=\"line line2\"></div>\n                        <div className=\"line line3\"></div>\n                    </div>\n                </FullBgcWrapper>\n                <div\n                    className={'cover-size half ' + (task.cover.background ? (selectedCover.isFull ? '' : 'selected') : 'disabled')}\n                    onClick={() => handleLayout(false)}>\n                    <HalfBgcWrapper className=\"half\" cover={selectedCover}></HalfBgcWrapper>\n                    <div className=\"line-wrapper\">\n                        <div className=\"line line1\"></div>\n                        <div className=\"line line2\"></div>\n                        <div className=\"line line3\"></div>\n                    </div>\n                </div>\n            </div>\n            {task.cover.background && <button className=\"modal-btn\" onClick={handleRemove}>Remove Cover</button>}\n            {(selectedCover.type === 'img' && selectedCover.isFull) &&\n                <div className=\"cover-txt-color\">\n                    <span className=\"pop-up-title\">Text color</span>\n                    <div className=\"flex justify-center\">\n                        <div\n                            onClick={() => handleThemeChange('light')}\n                            className=\"cover-txt light\"\n                            style={{ backgroundImage: `linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)),url(${selectedCover.background})` }}>\n                            <h3>{task.title}</h3>\n                        </div>\n                        <div\n                            onClick={() => handleThemeChange('dark')}\n                            className=\"cover-txt dark\"\n                            style={{ backgroundImage: `linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),url(${selectedCover.background})` }}>\n                            <h3>{task.title}</h3>\n                        </div>\n                    </div>\n                </div>}\n\n            <span className=\"pop-up-title\">Colors</span>\n            <div className=\"cover-palette\">\n                {coverColors.map((color, idx) => (\n                    <span\n                        className={'cover-color ' + (color === selectedCover.background ? 'selected' : '')}\n                        style={{ backgroundColor: color }}\n                        key={idx}\n                        onClick={() => handleSelected(color)}\n                    ></span>\n                ))}\n            </div>\n            {task.images.length > 0 && <span className=\"pop-up-title\">Images</span>}\n            {task.images.length > 0 &&\n                <div className=\"cover-img-wrapper\">\n                    {task.images.map(img => (\n                        <span\n                            // check id in case the same img has been uploaded\n                            className={'cover-img-preview ' + ((img.url + img.id) === (selectedCover.background + img.id) ? 'selected' : '')}\n                            style={{ backgroundImage: `url(${img.url})` }}\n                            onClick={() => handleSelected(img)}\n                            key={img.id}></span>\n                    ))}\n                </div>}\n            <div className=\"upload-img-container flex space-between align-center\">\n                <p>Upload image:</p>\n                <input onChange={handleUpload} id=\"file\" type=\"file\" title=\"Upload Image\" />\n                <label className=\"btn-3\" htmlFor=\"file\">\n                    {!loading ? <span>Upload</span> : <ScaleLoader height={9} width={5} color={\"#2c3e50\"} loading={loading} />}\n                </label>\n            </div>\n            <hr className=\"divider\" />\n        </div>\n    )\n}\n\nexport default CoverPicker\n","import React, { useRef } from 'react'\nimport { useState } from 'react'\nimport LabelPicker from './LabelPicker'\nimport DatePicker from './DatePicker'\nimport ChecklistPicker from './checklist-cmps/ChecklistPicker'\nimport useOnClickOutside from '../../../hooks/useOnClickOutSide'\nimport CoverPicker from './CoverPicker'\nimport { useEffect } from 'react'\nimport { BsLockFill } from 'react-icons/bs'\nimport { useCallback } from 'react'\n\nconst TaskActions = ({ task, labels, onUpdateTask, onLabelsUpdated, onAddActivity }) => {\n    const sidebarRef = useRef(null)\n    const [currAction, setCurrAction] = useState(null)\n\n    // useOnClickOutside(wrapperRef, () => {\n    //     console.log('yes');\n\n    //     if (currAction) {\n    //         closeModal()\n    //     }\n    // });\n\n    const [bounds, setBounds] = useState(null)\n    const ref = useRef(null)\n\n    const toggle = (ev, isActive) => {\n        ref.current = ev.target.id\n        const { top, left, height } = ev.target.getBoundingClientRect();\n        const res = window.innerWidth - left - 304\n\n        if (res < 50 && window.innerWidth > 770) {\n            setBounds({ top: top + height, left: left - 100 })\n        } else {\n            setBounds({ top: top + height, left: left - 50 })\n        }\n        if (isActive === currAction) {\n            setCurrAction(null)\n            setBounds(null)\n            ref.current = null\n        } else {\n            setCurrAction(isActive)\n        }\n    }\n\n    const updateWidthAndHeight = useCallback(() => {\n        if (ref.current) {\n            const activeEl = document.getElementById(ref.current)\n            const { top, left, height } = activeEl.getBoundingClientRect();\n            const res = window.innerWidth - left - 304\n            if (res < 50) {\n                setBounds({ top: top + height, right: 0 })\n            }\n            else {\n                setBounds({ top: top + height, left: left })\n            }\n        }\n    }, [])\n\n    useEffect(() => {\n        if (currAction) {\n            window.addEventListener(\"resize\", updateWidthAndHeight);\n        } else {\n            window.removeEventListener(\"resize\", updateWidthAndHeight)\n        }\n    }, [currAction])\n\n\n\n    const closeModal = () => {\n        setCurrAction(null)\n        ref.current = null\n    }\n\n    return (\n        <div className=\"modal-sidebar\" ref={sidebarRef}>\n            <h3>Add to card</h3>\n            <button id=\"sidebar-labels\" className=\"modal-btn\" onClick={(ev) => toggle(ev, 'isLabelActive')}>Labels</button>\n            {currAction === 'isLabelActive' &&\n                <LabelPicker\n                    bounds={bounds}\n                    task={task}\n                    labels={labels}\n                    onCloseModal={closeModal}\n                    onTaskUpdated={onUpdateTask}\n                    labelsUpdated={onLabelsUpdated}\n                    exceptionRef={sidebarRef}\n                />}\n            <button className=\"modal-btn\" >Members</button>\n            <button id=\"sidebar-checklist\" className=\"modal-btn\" onClick={(ev) => toggle(ev, 'isChecklistActive')}>Checklist</button>\n            {currAction === 'isChecklistActive' &&\n                <ChecklistPicker\n                    task={task}\n                    bounds={bounds}\n                    onTaskUpdated={onUpdateTask}\n                    onCloseModal={closeModal}\n                    exceptionRef={sidebarRef}\n                />}\n            <button id=\"sidebar-date\" className=\"modal-btn\" onClick={(ev) => toggle(ev, 'isDueDateActive')}>Due date</button>\n            {currAction === 'isDueDateActive' &&\n                <DatePicker\n                    bounds={bounds}\n                    task={task}\n                    onTaskUpdated={onUpdateTask}\n                    onAddActivity={onAddActivity}\n                    onCloseModal={closeModal}\n                    exceptionRef={sidebarRef}\n                />}\n            {/* Show the cover button only when cover is not set (displayed in header otherwise) */}\n            {!task.cover.background && <button id=\"sidebar-cover\" className=\"modal-btn\" onClick={(ev) => toggle(ev, 'isCoverActive')}>Cover</button>}\n            {currAction === 'isCoverActive' &&\n                <CoverPicker\n                    bounds={bounds}\n                    exceptionRef={sidebarRef}\n                    task={task}\n                    onCloseModal={closeModal}\n                    onTaskUpdated={onUpdateTask}\n                     />}\n        </div>\n    )\n}\n\nexport default TaskActions\n","import React, { useState, useEffect } from 'react'\nimport TextEditor from '../../../TextEditor';\nimport useOnClickOutside from '../../../../hooks/useOnClickOutSide';\nimport { useRef } from 'react';\nimport { BsTrash } from \"react-icons/bs\";\nimport { RiCloseLine } from 'react-icons/ri';\nimport { boardService } from '../../../../services/board.service';\nimport { useRouteMatch } from 'react-router-dom';\n\n\nconst ChecklistItem = ({ item, onSubmit, onRemoveItem, task }) => {\n    const [itemCopy, setItem] = useState({ ...item });\n    const [isEditing, setIsEditing] = useState(false);\n    const [displayMsg, setDisplayMsg] = useState(false);\n    const [unSavedTitle, setUnsavedTitle] = useState('');\n    const editorRef = useRef(null)\n    const initialRender = useRef(true)\n    const { url } = useRouteMatch();\n\n    useOnClickOutside(editorRef, () => {\n        if (isEditing) {\n            console.log('imhere', isEditing);\n            if (item.title !== itemCopy.title) {\n                setUnsavedTitle(itemCopy.title)\n                setItem(prevState => ({\n                    ...prevState,\n                    title: item.title,\n                }));\n                setDisplayMsg(true)\n            }\n            setIsEditing(false)\n            // setNewItem(null)\n        }\n    });\n\n    useEffect(() => {\n        if (!initialRender.current) {\n            const newActivity = boardService.newActivity(\n                `${itemCopy.isDone ? `Completed  ${item.title} on this card` : `Marked ${item.title} incomplete on this card`}`,\n                `${itemCopy.isDone ? `Completed  ${item.title} on <a href=\"#${url}\">${task.title}</a>` : `Marked ${item.title} incomplete on <a href=\"#${url}\">${task.title}</a>`}`,\n                task.id\n            )\n            updateItem(newActivity)\n        } else {\n            initialRender.current = false\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [itemCopy.isDone])\n\n    const handleChange = (ev) => {\n        const target = ev.target;\n        const value = target.type === 'checkbox' ? target.checked : target.value;\n        const name = target.name; setItem({ ...itemCopy, [name]: value });\n    }\n    const handleClose = () => {\n        // when escape is pressed on 'TextEditor.jsx'\n        setIsEditing(false)\n    }\n\n    const updateItem = (activity) => {\n        // if (itemCopy.title === item.title) return;\n        if (!itemCopy.title) {\n            setIsEditing(true)\n            return;\n        }\n        // console.log('dasdasds');\n        setIsEditing(false)\n        setDisplayMsg(false)\n        onSubmit({ ...itemCopy }, activity)\n    }\n\n    const handleRemove = () => {\n        onRemoveItem(itemCopy.id)\n    }\n    const startEditing = () => {\n        setItem(prevState => ({\n            ...prevState,\n            title: unSavedTitle,\n        }));\n        setIsEditing(true)\n    }\n    const discardUnsaved = () => {\n        setDisplayMsg(false)\n    }\n    return (\n        <div className=\"checklist-item\" >\n            <div className={'checklist-item-editor  ' + (itemCopy.isDone ? 'done' : '')}>\n                {itemCopy && !isEditing &&\n                    // <label for=\"checkbox-1\">\n                    <input type=\"checkbox\"  name=\"isDone\" checked={itemCopy.isDone} onChange={handleChange} />\n                    // </label>\n                }\n                <div className=\"item-title\" onClick={() => setIsEditing(true)} ref={editorRef}>\n                    <TextEditor\n                        text={itemCopy.title}\n                        onChange={handleChange}\n                        onSubmit={updateItem}\n                        onEscape={handleClose}\n                        isFocused={isEditing}\n                        type=\"p\"\n                        name=\"title\"\n                    />\n                    {isEditing &&\n                        <div className=\"add-item-controls\">\n                            <button className=\"submit-btn\">Save</button>\n                            <button className=\"clear-btn icon-lg\" onClick={handleClose}>\n                                <RiCloseLine />\n                            </button>\n                            <div className=\"spacer\" onClick={handleClose}></div>\n                        </div>}\n                </div>\n                {!isEditing &&\n                    <button className=\"remove-item-btn clear-btn\" onClick={handleRemove}>\n                        <BsTrash />\n                    </button>}\n            </div>\n            {displayMsg && !isEditing &&\n                <p className=\"checklist-user-msg\">\n                    <span>You have unsaved edits on this field.</span>\n                    <button className=\"clear-btn\" onClick={startEditing}>View edits</button>\n                    <button className=\"clear-btn\" onClick={discardUnsaved}>Discard</button>\n                </p>}\n\n        </div>\n    )\n}\n\nexport default ChecklistItem\n","import React, { useState, useRef, useEffect } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport TextEditor from '../../../TextEditor'\nimport { boardService } from '../../../../services/board.service'\nimport useOnClickOutside from '../../../../hooks/useOnClickOutSide';\nimport ChecklistItem from './ChecklistItem';\n\nimport { Progress } from 'react-sweet-progress';\nimport \"react-sweet-progress/lib/style.css\";\nimport { toggleInitialAddition } from '../../../../store/actions/generalAction';\nimport { RiCloseLine } from 'react-icons/ri';\nimport { useRouteMatch } from 'react-router-dom';\n\nconst TaskChecklist = ({ task, checklist, onUpdateTask }) => {\n    const [newItem, setNewItem] = useState(null);\n    const [checklistTitle, setChecklistTitle] = useState(checklist.title);\n    const [progress, setProgress] = useState(null);\n    const [isEditing, setIsEditing] = useState(false);\n    const wrapperRef = useRef(null)\n    const { url } = useRouteMatch();\n    const dispatch = useDispatch()\n    const isInitialAddition = useSelector(state => state.general.isInitialAddition)\n\n    useEffect(() => {\n        // Checking wether or not to start editing in TaskChecklist cmp on initial render\n        if (isInitialAddition) {\n            addItem()\n        }\n    }, [])\n\n\n    useEffect(() => {\n        const doneCount = checklist.listItems.reduce((acc, item) => {\n            if (item.isDone) acc++\n            return acc\n        }, 0)\n        let donePrecent = Math.round((doneCount * 100) / checklist.listItems.length)\n        setProgress(donePrecent)\n    }, [checklist])\n\n    const addItem = () => {\n        const emptyItem = boardService.getEmptyListItem();\n        setNewItem(emptyItem)\n        setIsEditing(true);\n        if (isInitialAddition) {\n            dispatch(toggleInitialAddition(false))\n        }\n    }\n\n    const handleClose = () => {\n        setIsEditing(false);\n        setNewItem(null);\n    }\n\n    const handleChange = (ev) => {\n        setNewItem({ ...newItem, [ev.target.name]: ev.target.value });\n    }\n    const handleChecklistChange = (ev) => {\n        setChecklistTitle(ev.target.value);\n    }\n\n    const updateChecklistTitle = () => {\n        const checklistCopy = { ...checklist };\n        checklistCopy.title = checklistTitle\n        const newActivity = boardService.newActivity(\n            `Renamed ${checklistCopy.title} from (${checklist.title})`,\n            `Renamed ${checklistCopy.title} from (${checklist.title}) on <a href=\"#${url}\">${task.title}</a>`,\n            task.id\n        )\n        updateTask(checklistCopy, newActivity);\n    }\n\n\n    useOnClickOutside(wrapperRef, () => {\n        if (isEditing) {\n            setIsEditing(false)\n            setNewItem(null)\n        }\n    });\n\n    const removeItem = (itemId) => {\n        const checklistCopy = { ...checklist };\n        const idx = checklistCopy.listItems.findIndex(item => item.id === itemId)\n        if (idx !== -1) {\n            checklistCopy.listItems.splice(idx, 1)\n        }\n        updateTask(checklistCopy)\n    }\n\n    const updateChecklist = async (item, activity) => {\n        const checklistCopy = { ...checklist };\n        if (item) {\n            const idx = checklistCopy.listItems.findIndex(currItem => currItem.id === item.id)\n            if (idx !== -1) {\n                checklistCopy.listItems.splice(idx, 1, item) // update an item \n                await updateTask(checklistCopy, activity);\n            }\n        } else { // Add  item\n            if (!newItem.title) {\n                handleClose()\n                return;\n            }\n            // const newActivity = boardService.newActivity(\n            //     `Added ${newItem.title}  to ${checklist.title} on this card`,\n            //     `Added  ${newItem.title} to ${checklist.title} on <a href=\"#${url}/${task.id}\">${task.title}</a>`,\n            //     task.id\n            // )\n            checklistCopy.listItems.push(newItem)\n            await updateTask(checklistCopy);\n            addItem()\n        }\n    }\n\n    const updateTask = (updatedChecklist, activity) => {\n        const taskCopy = JSON.parse(JSON.stringify(task));\n\n        if (updatedChecklist) {\n            const idx = taskCopy.checklists.findIndex(currChecklist => currChecklist.id === updatedChecklist.id)\n            taskCopy.checklists.splice(idx, 1, updatedChecklist)\n        } else {\n            taskCopy.checklists = taskCopy.checklists.filter(currChecklist => currChecklist.id !== checklist.id) // Delete checklist\n            activity = boardService.newActivity(\n                `Removed ${checklist.title}  on this card`,\n                `Removed ${checklist.title} on <a href=\"#${url}\">${task.title}</a>`,\n                task.id\n            )\n        }\n        onUpdateTask(taskCopy, activity)\n        setIsEditing(false);\n        setNewItem(null);\n    }\n\n    return (\n        <div className=\"task-checklist\">\n            <div className=\"section-title flex align-center\">\n                <TextEditor\n                    text={checklistTitle}\n                    onChange={handleChecklistChange}\n                    onInputBlur={updateChecklistTitle}\n                    type=\"h3\"\n                />\n                <button className=\"modal-btn\" onClick={() => updateTask()}>Delete</button>\n            </div>\n\n            {checklist.listItems.length > 0 &&\n                <Progress\n                    percent={progress}\n                />}\n            {checklist && checklist.listItems.map(item => (\n                <ChecklistItem\n                    key={item.id}\n                    onSubmit={updateChecklist}\n                    onRemoveItem={removeItem}\n                    item={item}\n                    task={task}\n                />\n            ))\n            }\n            {newItem && isEditing &&\n                <div className=\"add-item\" ref={wrapperRef}>\n                    <TextEditor\n                        onChange={handleChange}\n                        onSubmit={updateChecklist}\n                        onEscape={handleClose}\n                        isFocused={isEditing}\n                        type=\"p\"\n                        name=\"title\"\n                    />\n\n                    <div className=\"add-item-controls\" >\n                        <button className=\"submit-btn\" onClick={() => updateChecklist()}>Save</button>\n                        <button className=\"clear-btn icon-lg\" onClick={handleClose}>\n                            <RiCloseLine />\n                        </button>\n                        <div className=\"spacer\" onClick={handleClose}></div>\n                    </div>\n                </div>\n\n            }\n            {!isEditing && <button className=\"modal-btn\" onClick={addItem} >Add an item</button>}\n        </div>\n    )\n}\n\nexport default TaskChecklist\n","import React, { useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { createSelector } from 'reselect'\nimport Moment from 'react-moment';\nimport { useEffect } from 'react';\nimport { NavLink } from 'react-router-dom';\n\nconst calendarStrings = {\n    lastDay: '[Yesterday at] LT',\n    sameDay: '[Today at] LT',\n    nextDay: '[Tomorrow at] LT',\n    lastWeek: '[last] dddd [at] LT',\n    nextWeek: 'dddd [at] LT',\n    sameElse: 'MMMM D [at] LT'\n};\n\nconst LIMIT = 5;\n\nconst ActivityLog = ({ taskId = null }) => {\n    const filteredActivities = createSelector(\n        state => (\n            state.board.currBoard.activities\n        ),\n        activities => taskId ? activities.filter(activity => activity.taskId === taskId) : activities\n    );\n    const activities = useSelector(filteredActivities)\n\n    const [showContent, setShowContent] = useState(true);\n    const [showMore, setShowMore] = useState(true);\n    const [list, setList] = useState(activities.slice(0, LIMIT));\n    const [index, setIndex] = useState(LIMIT);\n\n    useEffect(() => {\n        setList(activities.slice(0, LIMIT))\n        setShowMore(true)\n        setIndex(LIMIT)\n    }, [activities.length])\n\n    const loadMore = () => {\n        console.log('firstinDEX:', index)\n        const newIndex = index + LIMIT;\n        const newShowMore = newIndex <= (activities.length - 1);\n        console.log('activities: ', activities, ' index: ', index, ' newIndex: ', newIndex);\n        const newList = list.concat(activities.slice(index, newIndex));\n        setIndex(newIndex);\n        setList(newList);\n        setShowMore(newShowMore);\n    }\n    const toggleContent = () => {\n        setShowContent(prevState => (!prevState));\n    }\n\n    return (\n        <div className=\"activity-log\">\n            {taskId && <button className=\"modal-btn\" onClick={toggleContent}>{showContent ? 'Hide details' : 'Show details'}</button>}\n            {showContent && list.length > 0 && list.map(activity => (\n                <div className='activity-content' key={activity.id}>\n                    {taskId ?\n                        <p className=\"activity-desc\" dangerouslySetInnerHTML={{ __html: activity.cardTxt }}></p> :\n                        <p className=\"activity-desc\" dangerouslySetInnerHTML={{ __html: activity.boardTxt }}></p>}\n                    <Moment calendar={calendarStrings}>{activity.date}</Moment>\n                </div>\n            ))}\n            {showContent && showMore && activities.length > LIMIT && <button className=\"clear-btn show-more-btn\" onClick={loadMore}> Load More </button>}\n        </div>\n    )\n}\n\nexport default ActivityLog\n","import React, { useState, useContext, useEffect, useRef, useMemo } from 'react'\nimport { useParams, useHistory, useRouteMatch } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux'\nimport { loadTask, saveBoard, updateTask } from '../store/actions/boardActions';\nimport Color from 'color-thief-react';\nimport { boardService } from '../services/board.service';\nimport Moment from 'react-moment';\n\nimport TextEditor from '../components/TextEditor';\nimport TaskActions from '../components/task-cmps/task-actions/TaskActions';\nimport TaskChecklist from '../components/task-cmps/task-actions/checklist-cmps/TaskChecklist';\nimport LabelList from '../components/task-cmps/task-actions/LabelList';\nimport ActivityLog from '../components/ActivityLog';\nimport useOnClickOutside from '../hooks/useOnClickOutSide';\nimport { RiAddCircleLine, RiArrowDownSLine, RiArrowDropDownLine, RiCloseLine } from 'react-icons/ri';\n\nimport CoverPicker from '../components/task-cmps/task-actions/CoverPicker';\nimport LabelPicker from '../components/task-cmps/task-actions/LabelPicker';\nimport DatePicker from '../components/task-cmps/task-actions/DatePicker';\n\n\nconst calendarStrings = {\n    lastDay: '[Yesterday]',\n    sameDay: '[Today]',\n    nextDay: '[Tomorrow]',\n    sameElse: 'MMMM D'\n};\nconst TaskDetails = () => {\n\n    const dispatch = useDispatch()\n    const currTask = useSelector(state => state.board.currTask)\n    const board = useSelector(state => state.board.currBoard)\n\n    const [activeAction, setActiveAction] = useState(null)\n    const [taskCopy, setTask] = useState(null)\n\n    const wrapperRef = useRef(null)\n    const modalHeaderRef = useRef(null)\n    const exceptionRef = useRef(null)\n\n    const { taskId } = useParams();\n    const history = useHistory();\n    const { url } = useRouteMatch();\n\n    useEffect(() => {\n        const load = async () => {\n            const res = await dispatch(loadTask(taskId))\n            if (!res) {\n                history.push(`/board/${board._id}`)\n            }\n        }\n        load()\n    }, [])\n\n\n\n    useEffect(() => {\n\n        document.body.style.overflowX = 'hidden'\n        return () => {\n            // document.body.style.overflowX = 'unset'\n            document.body.style.overflowX = 'unset'\n\n        }\n    }, [])\n\n\n    useEffect(() => {\n        const setTaskCopy = () => {\n            if (currTask) {\n                setTask({ ...currTask })\n            }\n        }\n        setTaskCopy()\n    }, [currTask])\n\n\n\n\n    const closeModal = () => {\n        history.push(`/board/${board._id}`)\n    }\n\n    useOnClickOutside(wrapperRef, () => {\n        console.log('paam ahat')\n        closeModal()\n    });\n    useOnClickOutside(modalHeaderRef, () => {\n        console.log('paam ahat')\n        setActiveAction(null)\n    });\n\n    const handleChange = (ev) => {\n        setTask({ ...taskCopy, [ev.target.name]: ev.target.value })\n    }\n\n    const onUpdateTask = async (task, activity = null) => {\n        if (task) {\n            await updateBoard({ ...task }, activity)\n        } else {\n            updateBoard({ ...taskCopy })\n        }\n    }\n\n    const updateBoard = async (task, activity) => {\n        dispatch(updateTask(task))\n        const boardCopy = JSON.parse(JSON.stringify(board))\n        if (activity) {\n            boardCopy.activities.unshift(activity)\n            // boardCopy.activities = []\n        }\n        boardCopy.taskLists.forEach(taskList => {\n            let idx = taskList.tasks.findIndex(currTask => currTask.id === task.id)\n            if (idx !== -1) {\n                taskList.tasks.splice(idx, 1, task)\n            }\n        })\n        await dispatch(saveBoard(boardCopy))\n    }\n\n    const updateBoardLabels = (updatedLabels, editedLabel) => {\n        const boardCopy = JSON.parse(JSON.stringify(board));\n        boardCopy.labels = updatedLabels\n        boardCopy.taskLists.forEach(taskList => {\n            taskList.tasks.forEach(task => {\n                let currLabel = task.labels.find(label => label.id === editedLabel.id)\n                if (currLabel) {\n                    currLabel.title = editedLabel.title\n                }\n            })\n        })\n        dispatch(saveBoard(boardCopy))\n    }\n\n    const addActivity = async (activity) => {\n        const boardCopy = JSON.parse(JSON.stringify(board))\n        boardCopy.activities.unshift(activity)\n        await dispatch(saveBoard(boardCopy))\n    }\n    const handleIsDone = (ev) => {\n        ev.stopPropagation()\n        ev.preventDefault()\n        const { checked } = ev.target\n        const updatedTask = { ...taskCopy }\n        updatedTask.isDone = checked\n        const newActivity = boardService.newActivity(\n            `Marked the due date ${updatedTask.isDone ? 'complete' : 'incomplete'}`,\n            `Marked the due date ${updatedTask.isDone ? 'complete' : 'incomplete'} on <a href='#${url}'>${updatedTask.title}</a>`,\n            updatedTask.id\n        )\n        updateBoard(updatedTask, newActivity)\n    }\n    const handleActiveAction = (ev, action) => {\n        const { target } = ev\n        exceptionRef.current = target\n        if (action === activeAction) {\n            setActiveAction(null)\n            console.log('yes same');\n            return\n        } else {\n            setActiveAction(action)\n        }\n    }\n    const isDue = useMemo(() => {\n        if (currTask) {\n            console.log('hi');\n            let date = new Date()\n            date.setHours(0, 0, 0, 0)\n            date.setDate(date.getDate() + 1)\n            if (currTask.isDone) {\n                return { class: 'task-complete', txt: 'Complete' }\n            }\n            if (date.getTime() === currTask.dueDate) {\n                return { class: 'due-soon', txt: 'Due soon' }\n            } if (currTask.dueDate <= Date.now()) {\n                return { class: 'over-due', txt: 'Over due' }\n            } else return ''\n\n        }\n\n    }, [currTask]);\n    return (\n        // <section className='task-details-wrapper'>\n        <div className='task-details'>\n            <div className={'cover'} ></div>\n            {taskCopy && currTask &&\n                <div className='task-modal' ref={wrapperRef}>\n                    {taskCopy.cover.background &&\n                        <Color src={taskCopy.cover.background} crossOrigin='anonymous' format='hex'>\n                            {({ data }) => {\n                                return (\n                                    <div\n                                        className='modal-header '\n                                        style={{ backgroundImage: `url(${taskCopy.cover.background})`, backgroundColor: data ? data : taskCopy.cover.background }}\n                                    >\n                                        {taskCopy.cover.background &&\n                                            <button className='modal-btn' onClick={(ev) => handleActiveAction(ev, 'coverPicker')}>\n                                                Cover</button>}\n\n                                        {activeAction === 'coverPicker' &&\n                                            <CoverPicker // outside TaskActions\n                                                task={taskCopy}\n                                                onTaskUpdated={onUpdateTask}\n                                                onCloseModal={() => handleActiveAction('coverPicker')}\n                                                wrapperRef={modalHeaderRef}\n                                                exceptionRef={exceptionRef}\n                                            />}\n                                    </div>\n                                )\n                            }}\n                        </Color>\n                    }\n                    <a onClick={closeModal} className='modal-close-btn icon-lg' >\n                        <RiCloseLine />\n                    </a>\n                    <div className='modal-module'>\n                        <div className='task-title'>\n                            <TextEditor type='h3' name='title' text={taskCopy.title} onChange={handleChange} onInputBlur={onUpdateTask} />\n                        </div>\n                    </div>\n                    <div className='task-content'>\n                        <div className='left-side'>\n                            <div className='modal-module'>\n                                <div className='task-labels-date'>\n                                    {taskCopy.labels.length > 0 &&\n                                        <div className=\"task-labels\">\n                                            <h3 className='task-item-title'>Labels</h3>\n                                            <div className='task-labels-list' >\n                                                <LabelList\n                                                    expandMode={true}\n                                                    onLabelClicked={(ev) => handleActiveAction(ev, 'labelPicker')}\n                                                    labels={taskCopy.labels} />\n                                            </div>\n                                            {activeAction === 'labelPicker' &&\n                                                <LabelPicker // outside TaskActions\n                                                    task={taskCopy}\n                                                    onTaskUpdated={onUpdateTask}\n                                                    labelsUpdated={updateBoardLabels}\n                                                    onCloseModal={() => handleActiveAction('labelPicker')}\n                                                    labels={board.labels}\n                                                    exceptionRef={exceptionRef}\n                                                />}\n                                        </div>}\n                                    {taskCopy.dueDate &&\n                                        <div className='task-due-date'>\n                                            <h3 className='task-item-title'>Due date</h3>\n                                            <div className='modal-btn' onClick={(ev) => handleActiveAction(ev, 'datePicker')}>\n                                                <label>\n                                                    <input className='css-checkbox' type='checkbox' name='isDone' checked={taskCopy.isDone} onChange={handleIsDone} />\n                                                    <i></i>\n                                                </label>\n                                                <Moment calendar={calendarStrings} date={taskCopy.dueDate} />\n                                                <span className={'task-badge ' + (isDue ? isDue.class : '')}>{isDue.txt}</span>\n                                                <RiArrowDownSLine className=\"icon-lg\" />\n\n                                            </div>\n\n                                            {activeAction === 'datePicker' &&\n                                                <DatePicker\n                                                    task={taskCopy}\n                                                    onTaskUpdated={onUpdateTask}\n                                                    exceptionRef={exceptionRef}\n                                                    onCloseModal={() => handleActiveAction('datePicker')}\n                                                />}\n                                        </div>}\n                                </div>\n                            </div>\n                            <div className='modal-module'>\n                                <div className='task-description'>\n                                    <h3 className='section-title'>Description</h3>\n                                    <TextEditor type='p' name='description' text={taskCopy.description} onChange={handleChange} onInputBlur={onUpdateTask} isWide={true} placeholder='Add a more detailed description…' />\n                                </div>\n                            </div>\n                            {taskCopy.checklists.length > 0 && <div className='modal-module'>\n                                {taskCopy.checklists.map(checklist => (\n                                    <TaskChecklist\n                                        checklist={checklist}\n                                        key={checklist.id}\n                                        task={taskCopy}\n                                        onUpdateTask={onUpdateTask}\n                                    />\n\n                                ))}\n                            </div>}\n                            <div className='modal-module'>\n                                <h3 className='section-title'>Activity</h3>\n                                <ActivityLog taskId={taskCopy.id} />\n                            </div>\n                        </div>\n                        <div className='right-side'>\n                            {board && <TaskActions\n                                task={taskCopy}\n                                labels={board.labels}\n                                onUpdateTask={onUpdateTask}\n                                onLabelsUpdated={updateBoardLabels}\n                                onAddActivity={addActivity}\n                            />}\n                        </div>\n                    </div>\n                </div>\n            }\n        </div >\n        // </section>\n    )\n}\n\nexport default TaskDetails\n","import React, { useState, useRef } from 'react'\nimport useOnClickOutside from '../../hooks/useOnClickOutSide'\n\nimport { boardService } from '../../services/board.service'\n\nimport { RiCloseLine } from 'react-icons/ri'\nimport TextEditor from '../TextEditor'\n\n\nconst AddTaskList = ({ board, onBoardUpdated }) => {\n    const [newTaskList, setTaskList] = useState(null)\n    const wrapperRef = useRef(null)\n\n    const getEmptyTaskList = () => {\n        const emptyTaskList = boardService.getEmptyList()\n        setTaskList(emptyTaskList)\n    }\n    const handleChange = (ev) => {\n        setTaskList({ ...newTaskList, [ev.target.name]: ev.target.value })\n    }\n\n    const addTaskList = () => {\n        if (!newTaskList.title) return\n        const boardCopy = JSON.parse(JSON.stringify(board));\n        boardCopy.taskLists.push(newTaskList);\n        onBoardUpdated(boardCopy)\n        setTaskList(null)\n    }\n\n    useOnClickOutside(wrapperRef, () => {\n        setTaskList(null)\n    });\n\n    return (\n        <div className=\"list-wrapper \">\n            {newTaskList ?\n                <div className=\"list add-list\" ref={wrapperRef}>\n                    <TextEditor\n                        isFocused={true}\n                        onChange={handleChange}\n                        onSubmit={addTaskList}\n                        name=\"title\"\n                        type=\"p\"\n                    />\n                    <div className=\"add-list-controls\">\n                        <button className=\"submit-btn\" onClick={addTaskList}>Add List</button>\n                        <button onClick={() => setTaskList(null)} className=\"clear-btn icon-lg\">\n                            <RiCloseLine />\n                        </button>\n                    </div>\n                </div>\n                :\n                <button className=\"modal-btn\" onClick={getEmptyTaskList}>Add another list </button>\n            }\n        </div>\n    )\n}\n\nexport default AddTaskList\n","import React, { useCallback, useEffect, useMemo } from 'react'\nimport { useState } from 'react'\nimport { RiArrowLeftSLine } from 'react-icons/ri'\nimport RiseLoader from \"react-spinners/RiseLoader\";\nimport { css } from \"@emotion/core\";\nconst override = css`\n  position: fixed;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n`;\n\nconst BoardBgPicker = ({ onGoBack, board, onBoardUpdated }) => {\n    const coverColors = [\n        '#61bd4f',\n        '#f2d600',\n        '#ff9f1a',\n        '#c377e0',\n        '#eb5a46',\n        '#055a8c',\n        '#705cc1',\n        '#00c2e0',\n        '#ff78cb',\n    ]\n    const imgs = [\n        'https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389449/Taskflow%20backgrounds/cacjncpn6qp4qivznyaj.jpg',\n        'https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389449/Taskflow%20backgrounds/jukyghlsvncbyovcqvce.jpg',\n        'https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389422/Taskflow%20backgrounds/2.jpg',\n        'https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389420/Taskflow%20backgrounds/itjhqv6u26jigvxmzwsi.jpg',\n        'https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389420/Taskflow%20backgrounds/sltgv2lrkmcbivdxxmb3.jpg',\n        'https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389410/Taskflow%20backgrounds/yeozivyoaywjmj4hciwp.jpg',\n        'https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389409/Taskflow%20backgrounds/idhd2wg760g7xa8vsze2.jpg',\n        'https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389400/Taskflow%20backgrounds/t9jpmstlb7oaijmbynmw.jpg',\n        'https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389394/Taskflow%20backgrounds/ponbl1heu65x22wus4ui.jpg',\n        'https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389391/Taskflow%20backgrounds/nnobztxqgr82swa61ne4.jpg'\n    ]\n    const [bgType, setBgType] = useState(null)\n\n    const handleGoBack = () => {\n        if (bgType) {\n            setBgType(null)\n        } else {\n            onGoBack()\n        }\n    }\n    const [loading, setLoading] = useState(false);\n\n\n    const handleStyle = (background, type) => {\n        if (background === board.style.background) return;\n        const boardCopy = JSON.parse(JSON.stringify(board));\n        boardCopy.style = { background: background, type: type }\n        // // setLoading(true)\n        onBoardUpdated(boardCopy)\n    }\n\n    return (\n        <div className=\"board-menu-bg-picker\">\n            {console.log('rednered')}\n\n            <button className=\"pop-up-back-btn clear-btn icon-lg\" onClick={handleGoBack} >\n                <RiArrowLeftSLine />\n            </button>\n            {!bgType && <div className=\"bg-picker-controls\">\n                <div className=\"bg-picker-btn\" onClick={() => setBgType('photos')}>\n                    <span className=\"photos image\"></span>\n                    <span className=\"bg-btn-title\">Photos</span>\n                </div>\n                <div className=\"bg-picker-btn\" onClick={() => setBgType('colors')}>\n                    <span className=\"colors image\"></span>\n                    <span className=\"bg-btn-title\">Colors</span>\n                </div>\n                {/* <button className=\"clear-btn bg-picker-btn photos\" onClick={() => setBgType('photos')}><span className=\"bg-btn-title\">Photos</span></button>\n                <button className=\"clear-btn bg-picker-btn colors\" onClick={() => setBgType('colors')}><span className=\"bg-btn-title\">Colors</span></button> */}\n            </div>}\n            <RiseLoader\n                css={override}\n                size={15} color={\"#2c3e50\"} loading={loading} />\n\n            { bgType === 'photos' &&\n                <div className=\"bg-section-wrapper\">\n                    {imgs.map((img, index) => (\n                        <span\n                            style={{ backgroundImage: `url(${img})` }}\n                            className={'bg-item'}\n                            key={index}\n                            onClick={() => handleStyle(img, 'img')}\n                        >\n                        </span>\n                    ))}\n                </div>}\n            {bgType === 'colors' &&\n                <div className=\"bg-section-wrapper\">\n                    {coverColors.map((color, idx) => (\n                        <span\n                            className={'bg-item'}\n                            style={{ backgroundColor: color }}\n                            key={idx}\n                            onClick={() => handleStyle(color, 'color')}\n                        >\n                        </span>\n                    ))}\n                </div>}\n            {/* {loading && <div className=\"loading\">         */}\n\n            {/* </div>} */}\n        </div >\n    )\n}\n\nexport default BoardBgPicker\n","import React, { useEffect, useState } from 'react'\nimport { useRef } from 'react'\nimport { RiArrowLeftSLine, RiCloseLine } from 'react-icons/ri'\nimport { FaListUl } from \"react-icons/fa\";\nimport useOnClickOutside from '../../hooks/useOnClickOutSide'\nimport ActivityLog from '../ActivityLog'\nimport BoardBgPicker from './BoardBgPicker'\nimport { useHistory, } from 'react-router-dom';\n\nconst BoardMenu = ({ isMenuOpen, closeMenu, menuBtnRef, board, onBoardUpdated }) => {\n    const history = useHistory();\n    const wrapperReff = useRef(null)\n    const [selectedAction, setAction] = useState(null)\n\n    const selectAction = (action) => {\n        switch (action) {\n            case 'backgroundPicker':\n                setAction({ ...selectedAction, type: action, title: 'Background' })\n                break;\n            default:\n                break;\n        }\n    }\n\n    const handleGoBack = () => {\n        setAction(null)\n    }\n    useOnClickOutside(wrapperReff, () => {\n        if (isMenuOpen) {\n            closeMenu()\n        }\n    }, menuBtnRef);\n\n    useEffect(() => {\n        if (isMenuOpen) {\n            setAction(null)\n        }\n    }, [isMenuOpen])\n\n    useEffect(() => {\n        return history.listen((location) => {\n            if (wrapperReff.current.classList.contains('menu-open')) {\n                closeMenu()\n            }\n        })\n    }, [history])\n\n\n\n    return (\n        <div className={`board-menu ${isMenuOpen ? 'menu-open' : '  '}`} ref={wrapperReff}>\n            <div className=\"pop-up-header\">\n                <h3>{selectedAction ? selectedAction.title : 'Menu'}</h3>\n                <button className=\"pop-up-close-btn clear-btn icon-lg\" onClick={closeMenu}>\n                    <RiCloseLine />\n                </button>\n\n            </div>\n            { !selectedAction ?\n                <div className=\"board-menu-content\">\n                    <div className=\"board-menu-nav\">\n                        <button className=\"clear-btn board-menu-nav-btn\" onClick={() => selectAction('backgroundPicker')}>Change background</button>\n                        <button className=\"clear-btn board-menu-nav-btn\" onClick={() => selectAction('boardName')}>Change board name</button>\n                        <button className=\"clear-btn board-menu-nav-btn\">Delete board</button>\n                    </div>\n                    <div>\n                        <div className=\"section-title\">\n                            <FaListUl className=\"icon-sm\" />\n                            {/* <GrList className=\"icon-sm\"/> */}\n                            <h4 className=\"\">Activity</h4>\n                        </div>\n\n                        {/* <ActivityLog /> */}\n                    </div>\n                </div> :\n                <div className=\"board-menu-content\">\n                    {selectedAction.type === 'backgroundPicker' && <BoardBgPicker onGoBack={handleGoBack} board={board} onBoardUpdated={onBoardUpdated} />}\n                    {/* {selectedAction === 'boardName' && <div>name</div>} */}\n                </div>\n            }\n        </div >\n    )\n}\n\nexport default BoardMenu\n","import React, { useCallback, useEffect, useRef, useState } from 'react'\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { selectCurrBoard } from '../selectors/boardSelector'\nimport { getBoardById, saveBoard, setCurrBoard } from '../store/actions/boardActions'\nimport { Route, useRouteMatch, useParams, useHistory } from 'react-router-dom'\n\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport { BsThreeDots } from \"react-icons/bs\";\nimport { utilService } from '../services/util.service'\nimport { socketService } from '../services/socket.service';\n\n\nimport TaskList from '../components/task-cmps/TaskList'\nimport TaskDetails from './TaskDetails'\nimport AddTaskList from '../components/task-cmps/AddTaskList'\nimport { RiCloseLine } from 'react-icons/ri';\nimport BoardMenu from '../components/board-menu-cmps/BoardMenu';\nimport { boardService } from '../services/board.service';\n\n\n\nconst BoardDetails = () => {\n    const { boardId } = useParams();\n    let { path } = useRouteMatch();\n    let history = useHistory();\n    let { url } = useRouteMatch();\n\n    const initialRender = useRef(true)\n    const menuBtnRef = useRef(null)\n\n    const dispatch = useDispatch()\n    // const board = useSelector(state => state.board.currBoard, shallowEqual)\n\n    const board = useSelector(selectCurrBoard)\n    const [isMenuOpen, setIsMenuOpen] = useState(false)\n\n    const queryAttr = \"data-rbd-draggable-id\";\n\n    useEffect(() => {\n        const loadBoard = async () => {\n            try {\n                await dispatch(getBoardById(boardId))\n                // setLoading(false);\n            } catch (e) {\n                // setLoading(false);\n                history.push('/boards')\n            }\n        }\n        loadBoard()\n    }, [])\n\n    useEffect(() => {\n        if (initialRender.current && board) {\n            console.log('board.', board._id);\n            socketService.setup()\n            socketService.emit('board topic', board._id)\n            socketService.on('update board', updateCurrBoard);\n            initialRender.current = false\n        }\n\n    }, [board])\n\n\n    useEffect(() => {\n        return () => {\n            socketService.off('update board', updateCurrBoard);\n            socketService.terminate();  // clean up\n        };\n    }, [])\n\n    const updateList = async (taskList, activity = null) => {\n        // setLoading(true);\n        const boardCopy = JSON.parse(JSON.stringify(board));\n        if (activity) {\n            boardCopy.activities.unshift(activity)\n        }\n        const idx = boardCopy.taskLists.findIndex(currList => currList.id === taskList.id)\n        boardCopy.taskLists.splice(idx, 1, taskList)\n        await dispatch(saveBoard(boardCopy))\n        // setLoading(false);\n        console.log('adterupdatelist');\n        // dispatch(setCurrBoard(boardCopy))\n    }\n\n    const updateBoard = useCallback((updatedBoard) => {\n        dispatch(saveBoard(updatedBoard))\n    }, [dispatch]);\n\n    // const updateBoard = async (updatedBoard) => {\n    //     await dispatch(saveBoard(updatedBoard))\n    // }\n\n    const updateCurrBoard = (updatedBoard) => {\n        dispatch(setCurrBoard(updatedBoard))\n    }\n\n    const removeList = (taskListId) => {\n        const boardCopy = JSON.parse(JSON.stringify(board));\n        const idx = boardCopy.taskLists.findIndex(currList => currList.id === taskListId)\n        boardCopy.taskLists.splice(idx, 1)\n        updateBoard(boardCopy)\n    }\n    const onDragEnd = (result) => {\n        // Dropped outside the list\n\n        const { source, destination } = result;\n\n        if (!destination) {\n            return;\n        }\n        if ((source.index === destination.index) &&\n            (source.droppableId === destination.droppableId)) { // Check if  update is required\n            return\n        }\n\n        let tasklists = [...board.taskLists];\n        const newState = JSON.parse(JSON.stringify(board));\n\n        if ((source.droppableId === destination.droppableId) && source.droppableId === 'board') {\n            const items = utilService.reorder(tasklists, source.index, destination.index);\n            newState.taskLists = items;\n        } else {\n            const sIndex = +source.droppableId;\n            const dIndex = +destination.droppableId;\n            if (sIndex === dIndex) {\n                const items = utilService.reorder(tasklists[sIndex].tasks, source.index, destination.index);\n                newState.taskLists[sIndex].tasks = items;\n            }\n            else {\n                const res = utilService.move(tasklists[sIndex].tasks, tasklists[dIndex].tasks, source, destination);\n                newState.taskLists[sIndex].tasks = res[sIndex];\n                newState.taskLists[dIndex].tasks = res[dIndex];\n\n                const { fromList, toList, task } = { fromList: tasklists[sIndex].title, toList: tasklists[dIndex].title, task: tasklists[sIndex].tasks[source.index] }\n                const newActivity = boardService.newActivity(\n                    `Moved this card from ${fromList} to ${toList}`,\n                    `Moved  <a href=\"#${url}/${task.id}\">${task.title}</a> from ${fromList} to ${toList}`,\n                    task.id\n                )\n                newState.activities.unshift(newActivity)\n            }\n        }\n        updateCurrBoard(newState)\n        updateBoard(newState)\n    }\n\n    const getDraggedDom = draggableId => {\n        const domQuery = `[${queryAttr}='${draggableId}']`;\n        const draggedDOM = document.querySelector(domQuery);\n\n        return draggedDOM;\n    };\n\n    const toggleMenu = () => {\n        setIsMenuOpen(prevState => (!prevState));\n    }\n\n    console.log('rendered')\n    if (!board) {\n        return (<div style={{ paddingTop: '50px' }}>baba\n        </div>)\n    }\n    else return (\n\n        <section className=\"board-details\" style={board.style.type === 'color' ? { backgroundColor: `${board.style.background}` } : { backgroundImage: `url(${board.style.background})` }}>\n\n            <div className=\"board-header\">\n                <button>button2</button>\n                <button className=\"clear-btn open-menu-btn\" onClick={toggleMenu} ref={menuBtnRef}>\n                    <span className=\"icon-sm\"><BsThreeDots /></span><span>Menu</span>\n                </button>\n            </div>\n            <BoardMenu isMenuOpen={isMenuOpen} closeMenu={toggleMenu} menuBtnRef={menuBtnRef} board={board} onBoardUpdated={updateBoard} />\n\n            {\n                board &&\n                <DragDropContext\n                    onDragEnd={onDragEnd}>\n                    <Droppable droppableId=\"board\" type=\"lists\" direction='horizontal' >\n                        {(provided, snapshot) => (\n                            <div className=\"list-container\" ref={provided.innerRef} {...provided.droppableProps}>\n                                {board.taskLists && board.taskLists.map((taskList, index) => (\n                                    <Draggable key={taskList.id} draggableId={taskList.id} index={index} type=\"lists\">\n                                        {(provided, snapshot) => (\n\n                                            <TaskList\n                                                taskListIdx={index}\n                                                taskList={taskList}\n                                                onRemoveList={removeList}\n                                                onListUpdated={updateList}\n                                                innerRef={provided.innerRef}\n                                                provided={provided}\n                                            />\n                                        )}\n\n                                    </Draggable>\n                                ))}\n                                {provided.placeholder}\n                                {/* {placeholderProps && snapshot.isDraggingOver && (\n                                <div\n                                    className=\"placeholder\"\n                                    style={{\n                                        left: placeholderProps.clientX,\n                                        height: placeholderProps.clientHeight,\n                                        width: placeholderProps.clientWidth,\n                                    }}\n                                />\n\n                            )} */}\n                                <AddTaskList board={board} onBoardUpdated={updateBoard} />\n                            </div>\n                        )}\n                    </Droppable>\n                </DragDropContext>\n            }\n            { board && <Route exact path={`${path}/:taskId`} component={TaskDetails} />}\n            {/* <div className=\"board-underlay\"  style={board.style.type === 'color' ? { backgroundColor: `${board.style.background}` } : { backgroundImage: `url(${board.style.background})` }}></div> */}\n        </section >\n    )\n}\n\nexport default BoardDetails\n\n\n\n\n","import React, { useEffect } from 'react'\nimport { NavLink, useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { loadBoards } from '../store/actions/boardActions'\n\nconst BoardsPage = () => {\n    const history = useHistory();\n\n    console.log('history', history);\n    // const { loadBoards, boards } = useContext(BoardContext)\n    const boards = useSelector(state => state.board.boards);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        const getBoards = async () => {\n            await dispatch(loadBoards())\n            console.log('adsasd')\n        }\n        getBoards()\n    }, [])\n\n    return (\n        <div>\n            <h1>Boards new</h1>\n            {boards && boards.length && boards.map(board => (\n                <div key={board._id}>\n                    <NavLink to={`board/${board._id}`}>{board._id}</NavLink>\n                </div>\n            ))}\n        </div>\n    )\n}\n\n\n\nexport default BoardsPage\n// export default connect(mapStateToProps, mapDispatchToProps)(BoardsPage);\n","import React, { lazy, Suspense } from 'react';\nimport { BrowserRouter as Router, Switch, Route, useHistory } from \"react-router-dom\";\n\nimport HomePage from './pages/HomePage';\nimport MainNav from './components/MainNav';\nimport BoardDetails from './pages/BoardDetails';\n\nimport BoardsPage from './pages/BoardsPage';\nimport { createBrowserHistory } from 'history';\n// const {BoardDetails} = React.lazy(() => import('./pages/BoardDetails'));\n// const history = createBrowserHistory()\n\nfunction App() {\n \n  // console.log('d',process.env)\n\n  return (\n    <main>\n      <Router>\n        <MainNav />\n        <Switch>\n          <Route path=\"/boards\" component={BoardsPage} />\n          {/* <Suspense fallback={<h1 style={{ paddingTop: '50px', fontSize:'100px' }}>Still Loading…</h1>}> */}\n            <Route path=\"/board/:boardId\" component={BoardDetails} />\n          {/* </Suspense> */}\n          <Route path=\"/\" component={HomePage} />\n        </Switch>\n      </Router>\n    </main>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","const initialState = {\n    boards: null,\n    currBoard: null,\n    currTask: null,\n    isExpanded: false\n};\n\nexport const boardReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case 'SET_BOARDS':\n            return {\n                ...state,\n                boards: JSON.parse(JSON.stringify(action.boards))\n            };\n        case 'SET_BOARD':\n            return {\n                ...state,\n                // currBoard: action.currBoard\n                currBoard: { ...action.currBoard }\n            };\n        case 'SET_TASK':\n            let taskToUpdate;\n            state.currBoard.taskLists.forEach(taskList => {\n                taskList.tasks.find(task => {\n                    if (task.id === action.id) taskToUpdate = task\n                })\n            })\n            return {\n                ...state,\n                currTask: taskToUpdate ? { ...taskToUpdate } : null\n            };\n        case 'UPDATE_TASK':\n            return {\n                ...state,\n                currTask: { ...action.currTask }\n            }\n        case 'TOGGLE_LABELS':\n            return {\n                ...state,\n                isExpanded: !state.isExpanded\n            }\n        default:\n            return state\n    }\n}\n","const initialState = {\n   isInitialAddition:false\n};\n\nexport const generalReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case 'TOGGLE_INITIAL_ADDITION':\n            return {\n                ...state,\n                isInitialAddition: action.isInitial\n            };\n        default:\n            return state\n    }\n}\n","import { createStore, combineReducers, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport { boardReducer } from './reducers/boardReducer';\nimport { generalReducer } from './reducers/generalReducer';\n\nconst store = createStore(combineReducers({\n    board: boardReducer,\n    general: generalReducer\n}), applyMiddleware(thunk));\n\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import { BrowserRouter as Router } from \"react-router-dom\";\nimport { Provider } from 'react-redux'\n\nimport App from './App.jsx';\nimport './styles/global.scss'\nimport * as serviceWorker from './serviceWorker';\n\nimport store from './store'\n\nReactDOM.render(\n  <Provider store={store}>\n  {/* <React.StrictMode> */}\n    <App />\n  {/* </React.StrictMode> */}\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}