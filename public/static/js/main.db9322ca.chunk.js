(this["webpackJsonptreller-react"]=this["webpackJsonptreller-react"]||[]).push([[0],{154:function(e,t){},172:function(e,t,a){},173:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(25),l=a.n(c),o=a(8),s=a(16),i=a(9),u=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Home Page"))},d=function(){return r.a.createElement("nav",null,r.a.createElement(s.b,{to:"/",className:"main-navbar-nav-link",exact:!0,activeClassName:"active"},"Home "),"| ",r.a.createElement(s.b,{to:"/boards",className:"main-navbar-nav-link",exact:!0,activeClassName:"active"},"Boards "))},m=a(19),b=a(6),f=a.n(b),p=a(7),v=a(5),E=a(89),k=a.n(E).a.create({withCredentials:!0}),O=function(e,t){return j(e,"GET",t)},g=function(e,t){return j(e,"PUT",t)};function j(e){return h.apply(this,arguments)}function h(){return(h=Object(p.a)(f.a.mark((function e(t){var a,n,r,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"get",n=c.length>2&&void 0!==c[2]?c[2]:null,e.prev=2,e.next=5,k({url:"".concat("/api/").concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:if(e.prev=9,e.t0=e.catch(2),401!==e.t0.response.status){e.next=14;break}throw console.log("ERROR: cannot find boards"),e.t0;case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var N={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},applyDrag:function(e,t){var a=t.removedIndex,n=t.addedIndex,r=t.payload;if(null===a&&null===n)return console.log("apply drag null"),e;var c=Object(m.a)(e),l=r;null!==a&&(l=c.splice(a,1)[0]);null!==n&&c.splice(n,0,l);return c},reorder:function(e,t,a){var n=Array.from(e),r=n.splice(t,1),c=Object(v.a)(r,1)[0];return n.splice(a,0,c),n},move:function(e,t,a,n){var r=Array.from(e),c=Array.from(t),l=r.splice(a.index,1),o=Object(v.a)(l,1)[0];c.splice(n.index,0,o);var s={};return s[a.droppableId]=r,s[n.droppableId]=c,s}};var y={query:function(){return O("board")},getById:function(e){return x.apply(this,arguments)},update:function(e){return g("board/".concat(e._id),e)},getEmptyList:function(){return{id:N.makeId(),title:"",theme:"white",tasks:[]}},getEmptyTask:function(){return{id:N.makeId(),title:"",description:"",creatorId:"",membersId:[],comments:[],dueDate:"",labels:[],isDone:!1,images:[],checklists:[],cover:{background:"",isFull:null,type:null}}},getEmptyCheckList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Checklist";return{id:N.makeId(),title:e,listItems:[]}},getEmptyListItem:function(){return{id:N.makeId(),title:"",isDone:!1}},newActivity:function(e,t,a){return{id:N.makeId(),cardTxt:e,boardTxt:t,taskId:a,date:Date.now()}}};function x(){return(x=Object(p.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("board/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S,C=a(90),w=a.n(C),I={setup:function(){S=w()("/")},terminate:function(){S=null},on:function(e,t){S.on(e,t)},off:function(e,t){S&&S.off(e,t)},emit:function(e,t){S&&S.emit(e,t)}};function D(e){return function(){var t=Object(p.a)(f.a.mark((function t(a){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(JSON.stringify(e)),a({type:"SET_BOARD",currBoard:n}),t.next=4,y.update(n);case 4:r=t.sent,I.emit("update board",r),console.log("afte boarrd saved",r),a({type:"SET_BOARD",currBoard:r});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function L(e){return function(){var t=Object(p.a)(f.a.mark((function t(a,n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a({type:"SET_TASK",id:e});case 2:return t.abrupt("return",n().board.currTask);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}function T(e){return function(t){t({type:"UPDATE_TASK",currTask:e})}}var A=a(22),B=a(11),M=a(4),R=a(42),J=(a(157),a(27)),U=function(e){var t=e.labels,a=e.onLabelClicked,n=void 0===a?null:a,c=e.expandMode,l=Object(o.c)(),s=Object(o.d)((function(e){return e.board.isExpanded}));return r.a.createElement("div",{className:"labels-list",onClick:function(e){e.preventDefault(),null!==n?n():l((function(e){e({type:"TOGGLE_LABELS"})}))}},t.map((function(e){return r.a.createElement("span",{key:e.id,className:"label  ".concat(s||c?"label-expand":""),style:{backgroundColor:e.color}},r.a.createElement("span",{className:"label-title"},e.title))})))},Y=a(38),F=a.n(Y),_=a(28);function P(){var e=Object(J.a)(["\n    ","\n            font-size:",";\n            font-family:",";\n\n            ","\n    "]);return P=function(){return e},e}var z=_.a.div(P(),(function(e){return e.cover.isFull?"color"===e.cover.type?{backgroundColor:e.cover.isFull?e.cover.background:""}:{backgroundImage:"url("+e.cover.background+")",minHeight:235,backgroundSize:"cover"}:""}),(function(e){return e.cover.isFull?"16px":""}),(function(e){return e.cover.isFull?"LatoBold":""}),(function(e){return e.cover.isFull?{display:"flex",fontSize:"16px",fontFamily:"LatoBold"}:""})),W={lastDay:"[Yesterday ] ",sameDay:"[Today ] ",nextDay:"[Tomorrow ] ",lastWeek:"DD/MM/YYYY",nextWeek:"DD/MM/YYYY",sameElse:"DD/MM/YYYY"},H=function(e){var t=e.task,a=e.index,n=Object(i.h)().url;return r.a.createElement(A.b,{draggableId:t.id,index:a},(function(e){return r.a.createElement("div",Object.assign({className:"task-preview"},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),r.a.createElement(s.b,{to:"".concat(n,"/").concat(t.id),className:"task-link",activeClassName:"active",draggable:"false"},r.a.createElement(z,{cover:t.cover},t.cover.background&&!t.cover.isFull&&r.a.createElement("div",null,"color"===t.cover.type?r.a.createElement("div",{className:t.cover.background?"task-cover":"",style:{backgroundColor:t.cover.background}}):r.a.createElement("img",{src:t.cover.background,className:"task-img-cover ratio-square "})),r.a.createElement("div",{className:"task-preview-content \n                                    ".concat("img"===t.cover.type&&t.cover.isFull?"dark"===t.cover.theme?"content-wrapper dark":"content-wrapper light":"")},t.labels&&r.a.createElement(U,{labels:t.labels}),r.a.createElement("div",{className:"task-preview-title",dir:"auto"},t.title),t.dueDate&&r.a.createElement(F.a,{calendar:W,date:t.dueDate})))))}))};var G=function(e){var t=Object(n.useState)(!1),a=Object(v.a)(t,2),r=a[0],c=a[1];function l(t){t.key===e&&c(!0)}var o=function(t){t.key===e&&c(!1)};return Object(n.useEffect)((function(){return window.addEventListener("keydown",l),window.addEventListener("keyup",o),function(){window.removeEventListener("keydown",l),window.removeEventListener("keyup",o)}}),[]),r},q=function(e){var t=e.type,a=e.text,c=e.name,l=e.onInputBlur,o=e.isWide,s=e.isFocused,i=e.blurInput,u=e.onChange,d=e.onSubmit,m=e.onEscape,b=Object(n.useState)(!1),f=Object(v.a)(b,2),p=f[0],E=f[1],k=Object(n.useState)(""),O=Object(v.a)(k,2),g=O[0],j=O[1],h=Object(n.useRef)(null),N=G("Enter"),y=G("Escape");Object(n.useEffect)((function(){p&&h.current.focus()}),[p]),Object(n.useEffect)((function(){s&&E(!0)}),[s,p]),Object(n.useEffect)((function(){void 0!==i&&i&&E(!1)}),[i]),Object(n.useEffect)((function(){p&&j(a)}),[p]),Object(n.useEffect)((function(){p&&!o&&(N&&(l?l():d(),E(!1)),y&&(u({target:{name:c,value:g}}),E(!1),m&&m()))}),[N,y]);var x=r.a.createElement(t,{className:"module-text",dir:"auto",onClick:function(){E(!0)}},a),S=function(){l&&(E(!1),l())};return r.a.createElement("div",{className:"text-editor-wrapper"},p?o?r.a.createElement("textarea",{ref:h,className:"focusClass",autoFocus:!0,rows:"5",name:c,defaultValue:a,onChange:function(e){u(e)},onBlur:S}):r.a.createElement("input",{dir:"auto",type:"text",ref:h,autoFocus:!0,className:"focusClass",name:c,defaultValue:a,onChange:function(e){var t=e.target.value;/^\s+$/.test(t)||""===t||u(e)},onBlur:S}):x)},K=a(13),V=function(e){var t=e.onCloseMenu,a=e.onRemoveList,n=e.onAddTask;return r.a.createElement("div",{className:"pop-up list-menu"},r.a.createElement("div",{className:"pop-up-header"},r.a.createElement("span",{className:"pop-up-title"},"Labels"),r.a.createElement("button",{className:"pop-up-close-btn clear-btn",onClick:function(){return t()}},r.a.createElement(K.b,null))),r.a.createElement("div",{onClick:n},"Add card"),r.a.createElement("div",null,"Change list color"),r.a.createElement("div",null,"Sort list by"),r.a.createElement("div",{onClick:a},"Delete list"))};var $=function(e,t){Object(n.useEffect)((function(){var a=function(a){e.current&&!e.current.contains(a.target)&&t(a)};return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),function(){document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}}),[e,t])},Q=function(e){var t=e.provided,a=e.innerRef,c=e.taskList,l=e.taskListIdx,o=e.onListUpdated,s=e.onRemoveList,i=Object(n.useState)(Object(M.a)({},c)),u=Object(v.a)(i,2),d=u[0],m=u[1],b=Object(n.useState)(null),E=Object(v.a)(b,2),k=E[0],O=E[1],g=Object(n.useState)(!1),j=Object(v.a)(g,2),h=j[0],N=j[1],x=Object(n.useState)(!1),S=Object(v.a)(x,2),C=S[0],w=S[1],I=Object(n.useRef)(null);Object(n.useEffect)((function(){m(Object(M.a)({},c))}),[c]);var D=function(){w(!1);var e=y.getEmptyTask();O(e),N(!0)},L=function(e){O(Object(M.a)(Object(M.a)({},k),{},Object(B.a)({},e.target.name,e.target.value)))},T=function(e){o(e||d),N(!1),O(null)},J=function(){var e=Object(p.a)(f.a.mark((function e(){var t,a,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:null,!k||!k.title){e.next=10;break}return(a=JSON.parse(JSON.stringify(d))).tasks.push(k),e.next=6,T(a);case 6:if("clickedOutside"!==t){e.next=8;break}return e.abrupt("return");case 8:O(null),D();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();$(I,(function(){h&&k&&k.title?J("clickedOutside"):U()}));var U=function(){O(null),N(!1)};return d&&r.a.createElement("div",Object.assign({className:"list-wrapper",ref:a},t.draggableProps),r.a.createElement("div",{className:"list"},r.a.createElement("div",Object.assign({className:"list-header"},t.dragHandleProps),d.title&&r.a.createElement(q,{name:"title",type:"h3",text:d.title,onChange:function(e){m(Object(M.a)(Object(M.a)({},d),{},Object(B.a)({},e.target.name,e.target.value)))},onInputBlur:T}),r.a.createElement("button",{className:"list-menu-btn clear-btn",onClick:function(){return w(!C)}},r.a.createElement(R.a,null)),C&&!h&&r.a.createElement(V,{onRemoveList:function(){s(c.id)},onAddTask:D,onCloseMenu:function(){return w(!1)}})),r.a.createElement(A.c,{type:"task",droppableId:"".concat(l)},(function(e){return r.a.createElement("div",{className:"list-content ",ref:e.innerRef},c.tasks.map((function(e,t){return r.a.createElement(H,{key:e.id,task:e,index:t})})),h&&k&&r.a.createElement("div",{className:"add-task-wrapper ",ref:I},r.a.createElement(q,{name:"title",type:"p",text:k.title,onChange:L,isFocused:h,onSubmit:J,onEscape:U}),r.a.createElement("div",{className:"add-task-controls"},r.a.createElement("button",{onClick:J,className:"submit-btn"},"Add task"),r.a.createElement("button",{onClick:U,className:"clear-btn icon-lg"},r.a.createElement(K.b,null)))),e.placeholder)})),r.a.createElement("div",{className:"list-footer"},!h&&!k&&r.a.createElement("a",{className:"clear-btn list-footer-btn",onClick:D},r.a.createElement("span",{className:"icon-lg add-icon"},r.a.createElement(K.a,null))," ",r.a.createElement("span",null,"Add new task")))))},X=a(34),Z=a.n(X),ee=a(92),te=function(e){var t=e.task,a=e.labels,c=e.onCloseModal,l=e.onTaskUpdated,o=e.labelsUpdated,s=Object(n.useState)(null),i=Object(v.a)(s,2),u=i[0],d=i[1],b=Object(n.useState)(!1),f=Object(v.a)(b,2),p=f[0],E=f[1],k=Object(n.useRef)(null);$(k,(function(){console.log("paamm ahat"),c()}));var O=function(e){d(Object(M.a)(Object(M.a)({},u),{},Object(B.a)({},e.target.name,e.target.value)))},g=function(){var e=Object(m.a)(a),t=e.findIndex((function(e){return e.id===u.id}));e.splice(t,1,u),o(Object(m.a)(e),u),E(!1)};Object(n.useEffect)((function(){if(!p&&u){var e=JSON.parse(JSON.stringify(t)),a=e.labels.findIndex((function(e){return e.id===u.id}));-1!==a&&(e.labels.splice(a,1,u),l(e))}}),[p]);return r.a.createElement("div",{className:"pop-up labels",ref:k},r.a.createElement("div",{className:"pop-up-header"},r.a.createElement("span",{className:"pop-up-title"},"Labels"),r.a.createElement("button",{className:"pop-up-close-btn clear-btn icon-lg",onClick:c},r.a.createElement(K.b,null))),r.a.createElement("ul",null,a.map((function(e){return r.a.createElement("li",{className:"label-container",key:e.id},r.a.createElement("span",{className:"card-label",style:{backgroundColor:e.color},onClick:function(){return function(e){var a=JSON.parse(JSON.stringify(t));if(a.labels.find((function(t){return t.id===e.id}))){var n=a.labels.findIndex((function(t){return t.id===e.id}));a.labels.splice(n,1)}else a.labels.push(e);l(a)}(e)}},r.a.createElement("span",{className:"label-title"},e.title),function(e){if(u)return e.id===u.id}(e)&&p&&r.a.createElement(q,{type:"p",name:"title",isFocused:p,text:e.title,onChange:O,onInputBlur:g}),r.a.createElement("span",{className:"label-selected"})),r.a.createElement("a",{href:"#",onClick:function(){return function(e){d(Object(M.a)({},e)),E(!0)}(e)}},r.a.createElement(ee.a,null)))}))))},ae=a(50),ne=a.n(ae),re=a(97),ce=(a(166),function(e){var t=e.task,a=e.onTaskUpdated,c=e.onCloseModal,l=e.onAddActivity,o=Object(n.useState)(new Date),s=Object(v.a)(o,2),u=s[0],d=s[1],m=Object(n.useState)(!1),b=Object(v.a)(m,2),E=b[0],k=b[1],O=Object(i.h)().url;Object(n.useEffect)((function(){if(t.dueDate){var e=new Date(t.dueDate);d(e)}}),[]),Object(n.useEffect)((function(){(function(){var e=Object(p.a)(f.a.mark((function e(){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=5;break}return a=ne()(new Date(t.dueDate)).format("MMM Do YY"),n=y.newActivity("set this card to be due at ".concat(a),'set <a href="'.concat(O,'">').concat(t.title,"</a> to be due at ").concat(a),t.id),e.next=5,l(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[E]);var g=function(){var e=Object(p.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=JSON.parse(JSON.stringify(t))).dueDate=u,e.next=4,a(n);case 4:k(!0),c();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"pop-up"},r.a.createElement("div",{className:"pop-up-header"},r.a.createElement("span",{className:"pop-up-title"},"Date"),r.a.createElement("button",{onClick:c,className:"pop-up-close-btn clear-btn icon-lg"},r.a.createElement(K.b,null))),r.a.createElement(re.a,{onChange:function(e){d(e)},value:u}),r.a.createElement("button",{onClick:g,className:"submit-btn add-date-btn"},"Save"))}),le=function(e){var t=e.task,a=e.onTaskUpdated,c=e.onCloseModal,l=Object(n.useState)({}),o=Object(v.a)(l,2),s=o[0],i=o[1];Object(n.useEffect)((function(){console.log("ONCE");var e=y.getEmptyCheckList();i(Object(M.a)({},e))}),[]);var u=function(){var e=JSON.parse(JSON.stringify(t)),n=Object(M.a)({},s);e.checklists.push(n),a(e),c()};return r.a.createElement("div",{className:"pop-up"},r.a.createElement("div",{className:"pop-up-header"},r.a.createElement("span",{className:"pop-up-title"},"Add checklist"),r.a.createElement("button",{className:"pop-up-close-btn clear-btn"})),r.a.createElement(q,{isFocused:!0,onChange:function(e){i(Object(M.a)(Object(M.a)({},s),{},Object(B.a)({},e.target.name,e.target.value)))},onSubmit:u,type:"p",name:"title"}),r.a.createElement("button",{onClick:u,className:"submit-btn add-date-btn"},"Save"))},oe=a(93),se=a.n(oe),ie={uploadImg:function(e){console.log("yes");var t="https://api.cloudinary.com/v1_1/".concat("dhz1jk4k6","/image/upload"),a=new FormData;return a.append("file",e.target.files[0]),a.append("upload_preset","jtim2mm3"),fetch(t,{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e)}))}};function ue(){var e=Object(J.a)(["\n","\n"]);return ue=function(){return e},e}function de(){var e=Object(J.a)(["\n","\n"]);return de=function(){return e},e}var me=_.a.div(de(),(function(e){return"color"===e.cover.type?{backgroundColor:e.cover.background}:{backgroundImage:"url("+e.cover.background+")",backgroundSize:"cover"}})),be=_.a.div(ue(),(function(e){return"color"===e.cover.type?{backgroundColor:e.cover.background}:{backgroundImage:"light"===e.cover.theme?"linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)),url("+e.cover.background+")":"linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),url("+e.cover.background+")",backgroundSize:"cover",backgroundPosition:"50%"}})),fe=function(e){var t=e.wrapperRef,a=e.task,c=e.onCloseModal,l=e.onTaskUpdated,o=Object(n.useState)(a.cover),s=Object(v.a)(o,2),i=s[0],u=s[1],d=Object(n.useState)(!1),m=Object(v.a)(d,2),b=m[0],E=m[1],k=function(e){var t=Object(M.a)({},a);e.id?(u(Object(M.a)(Object(M.a)({},i),{},{background:e.url,type:"img"})),t.cover.type="img",t.cover.background=e.url):(u(Object(M.a)(Object(M.a)({},i),{},{background:e,type:"color"})),t.cover.type="color",t.cover.background=e),l(t)},O=function(e){u(Object(M.a)(Object(M.a)({},i),{},{isFull:e}));var t=Object(M.a)({},a);t.cover.isFull=e,l(t)},g=function(e){if(e!==i.theme){u(Object(M.a)(Object(M.a)({},i),{},{theme:e}));var t=Object(M.a)({},a);t.cover.theme=e,l(t)}},j=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("yes mame"),E(!0),e.next=4,ie.uploadImg(t);case 4:n=e.sent,r=n.url,u(Object(M.a)(Object(M.a)({},i),{},{background:r,type:"img"})),c=Object(M.a)({},a),o={id:N.makeId(),url:r,isCover:!0},c.images.push(o),c.cover.background=r,c.cover.type="img",l(c),E(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"pop-up cover-picker",ref:t},r.a.createElement("div",{className:"pop-up-header"},r.a.createElement("span",{className:"pop-up-title"},"Cover"),r.a.createElement("button",{className:"pop-up-close-btn clear-btn icon-lg",onClick:c},r.a.createElement(K.b,null))),r.a.createElement("span",{className:"pop-up-title"},"Size"),r.a.createElement("div",{className:"cover-size-picker"},r.a.createElement(be,{cover:i,className:"cover-size "+(i.isFull?"selected":""),onClick:function(){return O(!0)}},r.a.createElement("div",{className:"line-wrapper ".concat("img"===a.cover.type&&"dark"===a.cover.theme?"dark":"")},r.a.createElement("div",{className:"line line1"}),r.a.createElement("div",{className:"line line2"}),r.a.createElement("div",{className:"line line3"}))),r.a.createElement("div",{className:"cover-size half "+(i.isFull?"":"selected"),onClick:function(){return O(!1)}},r.a.createElement(me,{className:"half",cover:i}),r.a.createElement("div",{className:"line-wrapper"},r.a.createElement("div",{className:"line line1"}),r.a.createElement("div",{className:"line line2"}),r.a.createElement("div",{className:"line line3"})))),r.a.createElement("button",{className:"modal-btn",onClick:function(){u(Object(M.a)(Object(M.a)({},i),{},{background:null,type:null,isFull:null,theme:null}));var e=Object(M.a)({},a);e.cover=Object(M.a)(Object(M.a)({},e.cover),{},{background:null,type:null,isFull:null,theme:null}),l(e)}},"Remove Cover"),"img"===i.type&&i.isFull&&r.a.createElement("div",{className:"cover-txt-color"},r.a.createElement("span",{className:"pop-up-title"},"Text color"),r.a.createElement("div",{className:"flex justify-center"},r.a.createElement("div",{onClick:function(){return g("light")},className:"cover-txt light",style:{backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)),url(".concat(i.background,")")}},r.a.createElement("h3",null,a.title)),r.a.createElement("div",{onClick:function(){return g("dark")},className:"cover-txt dark",style:{backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),url(".concat(i.background,")")}},r.a.createElement("h3",null,a.title)))),r.a.createElement("span",{className:"pop-up-title"},"Colors"),r.a.createElement("div",{className:"cover-palette"},["#61bd4f","#f2d600","#ff9f1a","#c377e0","#eb5a46","#055a8c","#705cc1","#00c2e0","#ff78cb"].map((function(e,t){return r.a.createElement("span",{className:"cover-color "+(e===i.background?"selected":""),style:{backgroundColor:e},key:t,onClick:function(){return k(e)}})}))),a.images.length>0&&r.a.createElement("span",{className:"pop-up-title"},"Images"),a.images.length>0&&r.a.createElement("div",{className:"cover-img-wrapper"},a.images.map((function(e){return r.a.createElement("span",{className:"cover-img-preview "+(e.url+e.id===i.background+e.id?"selected":""),style:{backgroundImage:"url(".concat(e.url,")")},onClick:function(){return k(e)},key:e.id})}))),r.a.createElement("div",{className:"upload-img-container flex space-between align-center"},r.a.createElement("p",null,"Upload image:"),r.a.createElement("input",{onChange:j,id:"file",type:"file",title:"Upload Image"}),r.a.createElement("label",{className:"btn-3",htmlFor:"file"},b?r.a.createElement(se.a,{height:9,width:5,color:"#2c3e50",loading:b}):r.a.createElement("span",null,"Upload"))),r.a.createElement("hr",{className:"divider"}))},pe=function(e){var t=e.task,a=e.labels,c=e.onUpdateTask,l=e.onLabelsUpdated,o=e.onAddActivity,s=Object(n.useRef)(null),i=Object(n.useState)(null),u=Object(v.a)(i,2),d=u[0],m=u[1];$(s,(function(){d&&f()}));var b=function(e){m(e===d?null:e)},f=function(){m(null)};return r.a.createElement("div",{className:"modal-sidebar",ref:s},r.a.createElement("button",{className:"modal-btn",onClick:function(){return b("isLabelActive")}},"Labels"),"isLabelActive"===d&&r.a.createElement(te,{task:t,labels:a,onCloseModal:f,onTaskUpdated:c,labelsUpdated:l}),r.a.createElement("button",{className:"modal-btn"},"Members"),r.a.createElement("button",{className:"modal-btn",onClick:function(){return b("isChecklistActive")}},"Checklist"),"isChecklistActive"===d&&r.a.createElement(le,{task:t,onTaskUpdated:c,onCloseModal:f}),r.a.createElement("button",{className:"modal-btn",onClick:function(){return b("isDueDateActive")}},"Due date"),"isDueDateActive"===d&&r.a.createElement(ce,{task:t,onTaskUpdated:c,onAddActivity:o,onCloseModal:f}),!t.cover.background&&r.a.createElement("button",{className:"modal-btn",onClick:function(){return b("isCoverActive")}},"Cover"),"isCoverActive"===d&&r.a.createElement(fe,{task:t,onCloseModal:f,onTaskUpdated:c}))},ve=function(e){var t=e.item,a=e.onSubmit,c=e.onRemoveItem,l=Object(n.useState)(Object(M.a)({},t)),o=Object(v.a)(l,2),s=o[0],i=o[1],u=Object(n.useState)(!1),d=Object(v.a)(u,2),m=d[0],b=d[1],f=Object(n.useRef)(null),p=Object(n.useRef)(!0);$(f,(function(){m&&(b(!1),console.log("yes"))})),Object(n.useEffect)((function(){p.current?p.current=!1:O()}),[s.isDone]);var E=function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;i(Object(M.a)(Object(M.a)({},s),{},Object(B.a)({},n,a)))},k=function(){b(!1)},O=function(){s.title?(b(!1),a(Object(M.a)({},s))):b(!0)};return r.a.createElement("div",{ref:f,className:"checklist-item"},r.a.createElement("div",{className:"checklist-item-edit space-between "+(s.isDone?"done":"")},r.a.createElement("div",{className:"flex align-center"},s&&r.a.createElement("input",{type:"checkbox",name:"isDone",checked:s.isDone,onChange:E}),r.a.createElement("div",{onClick:function(){return b(!0)}},r.a.createElement(q,{text:t.title,onChange:E,onSubmit:O,onEscape:k,blurInput:!m,isFocused:m,type:"p",name:"title"}))),r.a.createElement("button",{className:"remove-item-btn clear-btn",onClick:function(){c(s.id)}},r.a.createElement(R.b,null))),m&&r.a.createElement("div",{className:"flex"},r.a.createElement("button",null,"Save"),r.a.createElement("button",null,"sds"),r.a.createElement("div",{className:"spacer",onClick:k})))},Ee=a(95),ke=(a(171),function(e){var t=e.task,a=e.checklist,c=e.onUpdateTask,l=Object(n.useState)(null),o=Object(v.a)(l,2),s=o[0],i=o[1],u=Object(n.useState)(null),d=Object(v.a)(u,2),m=d[0],b=d[1],f=Object(n.useState)(!1),p=Object(v.a)(f,2),E=p[0],k=p[1],O=Object(n.useRef)(null);Object(n.useEffect)((function(){a.listItems.length||g()}),[a]),Object(n.useEffect)((function(){var e=a.listItems.reduce((function(e,t){return t.isDone&&e++,e}),0),t=Math.round(100*e/a.listItems.length);b(t)}),[a]);var g=function(){var e=y.getEmptyListItem();i(Object(M.a)({},e)),k(!0)},j=function(){k(!1),i(null)};$(O,(function(){E&&(k(!1),i(null))}));var h=function(e){var t=Object(M.a)({},a),n=t.listItems.findIndex((function(t){return t.id===e}));-1!==n&&t.listItems.splice(n,1),x(t)},N=function(e){var t=Object(M.a)({},a);if(e){var n=t.listItems.findIndex((function(t){return t.id===e.id}));-1!==n&&(t.listItems.splice(n,1,e),x(t))}else t.listItems.push(s),x(t),g()},x=function(e){var a=JSON.parse(JSON.stringify(t)),n=a.checklists.findIndex((function(t){return t.id===e.id}));a.checklists.splice(n,1,e),c(a),k(!1),i(null)};return r.a.createElement("div",null,r.a.createElement("h3",null,a.title),a.listItems.length>0&&r.a.createElement(Ee.Progress,{percent:m}),a&&a.listItems.map((function(e){return r.a.createElement(ve,{key:e.id,onSubmit:N,onRemoveItem:h,item:e})})),s&&E&&r.a.createElement("div",{ref:O},r.a.createElement(q,{onChange:function(e){i(Object(M.a)(Object(M.a)({},s),{},Object(B.a)({},e.target.name,e.target.value)))},onSubmit:N,onEscape:j,isFocused:E,type:"p",name:"title"}),r.a.createElement("div",{className:"flex"},r.a.createElement("button",null,"Save"),r.a.createElement("button",{onClick:j},"Close"),r.a.createElement("div",{className:"spacer",onClick:j}))),!E&&r.a.createElement("button",{className:"modal-btn",onClick:g},"Add an item"))}),Oe=function(e){var t=e.taskId,a=void 0===t?null:t,n=Object(o.d)((function(e){return a?e.board.currBoard.activities.filter((function(e){return e.taskId===a})):e.board.currBoard.activities}));return r.a.createElement("div",null,r.a.createElement("h1",null,"activity"),n.length>0&&n.map((function(e){return r.a.createElement("div",{key:e.id},a?r.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.cardTxt}}):r.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.boardTxt}}))})))},ge={lastDay:"[Yesterday ] ",sameDay:"[Today ] ",nextDay:"[Tomorrow ] ",lastWeek:"DD/MM/YYYY",nextWeek:"DD/MM/YYYY",sameElse:"DD/MM/YYYY"},je=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.board.currTask})),a=Object(o.d)((function(e){return e.board.currBoard})),c=Object(n.useState)(null),l=Object(v.a)(c,2),s=l[0],u=l[1],d=Object(n.useState)(null),m=Object(v.a)(d,2),b=m[0],E=m[1],k=Object(n.useRef)(null),O=Object(n.useRef)(null),g=Object(i.g)().taskId,j=Object(i.f)();Object(n.useEffect)((function(){(function(){var t=Object(p.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(L(g));case 2:t.sent||j.push("/board/".concat(a._id));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){t&&E(Object(M.a)({},t))}),[t]);var h=function(){j.push("/board/".concat(a._id))};$(k,(function(){console.log("paam ahat"),h()})),$(O,(function(){console.log("paam ahat"),u(null)}));var N=function(e){E(Object(M.a)(Object(M.a)({},b),{},Object(B.a)({},e.target.name,e.target.value)))},y=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,x(Object(M.a)({},t));case 3:e.next=6;break;case 5:x(Object(M.a)({},b));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var t=Object(p.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(T(n)),(r=JSON.parse(JSON.stringify(a))).taskLists.forEach((function(e){var t=e.tasks.findIndex((function(e){return e.id===n.id}));-1!==t&&e.tasks.splice(t,1,n)})),t.next=5,e(D(r));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(t,n){var r=JSON.parse(JSON.stringify(a));r.labels=t,r.taskLists.forEach((function(e){e.tasks.forEach((function(e){var t=e.labels.find((function(e){return e.id===n.id}));t&&(t.title=n.title)}))})),e(D(r))},C=function(){var t=Object(p.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=JSON.parse(JSON.stringify(a))).activities.unshift(n),t.next=4,e(D(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("section",{className:"task-details-wrapper"},r.a.createElement("div",{className:"cover"}),r.a.createElement("div",{className:"task-details"},b&&t&&r.a.createElement("div",{className:"task-modal",ref:k},b.cover.background&&r.a.createElement(Z.a,{src:b.cover.background,crossOrigin:"anonymous",format:"hex"},(function(e){var t=e.data;return r.a.createElement("div",{style:{backgroundImage:"url(".concat(b.cover.background,")"),backgroundColor:t||b.cover.background},className:"modal-header"},b.cover.background&&r.a.createElement("button",{className:"modal-btn",onClick:function(){return u("coverPicker")}},"Cover"),"coverPicker"===s&&r.a.createElement(fe,{task:b,onTaskUpdated:y,onCloseModal:function(){return u(null)},wrapperRef:O}))})),r.a.createElement("a",{onClick:h,className:"modal-close-btn icon-lg"},r.a.createElement(K.b,null)),r.a.createElement("div",{className:"modal-module"},r.a.createElement("div",{className:"task-title"},r.a.createElement(q,{type:"h3",name:"title",text:b.title,onChange:N,onInputBlur:y}))),r.a.createElement("div",{className:"task-content"},r.a.createElement("div",{className:"left-side"},r.a.createElement("div",{className:"modal-module"},r.a.createElement("div",{className:"task-labels-date"},r.a.createElement("div",{className:"task-labels-list"},r.a.createElement("h3",null,"Labels"),b.labels&&r.a.createElement(U,{expandMode:!0,onLabelClicked:function(){return u("labelPicker")},labels:b.labels}),"labelPicker"===s&&r.a.createElement(te,{task:b,onTaskUpdated:y,labelsUpdated:S,onCloseModal:function(){return u(null)},labels:a.labels})),b.dueDate&&r.a.createElement("div",{className:"task-due-date"},r.a.createElement("h3",null,"Due date"),r.a.createElement(F.a,{calendar:ge,date:b.dueDate})))),r.a.createElement("div",{className:"modal-module"},r.a.createElement("div",{className:"task-description"},r.a.createElement("i",{className:"far fa-file-alt"}),r.a.createElement("h3",null,"Description")),r.a.createElement(q,{type:"p",name:"description",text:b.description,onChange:N,onInputBlur:y,isWide:!0})),r.a.createElement("div",{className:"modal-module"},b.checklists&&b.checklists.map((function(e){return r.a.createElement(ke,{checklist:e,key:e.id,task:b,onUpdateTask:y})}))),r.a.createElement("div",{className:"modal-module"},r.a.createElement("h3",null,"Activity"),r.a.createElement(Oe,{taskId:b.id}))),r.a.createElement("div",{className:"right-side"},r.a.createElement("h3",null,"Add to card"),a&&r.a.createElement(pe,{task:b,labels:a.labels,onUpdateTask:y,onLabelsUpdated:S,onAddActivity:C}))))))},he=function(e){var t=e.board,a=e.onBoardUpdated,c=Object(n.useState)(null),l=Object(v.a)(c,2),o=l[0],s=l[1],i=Object(n.useRef)(null),u=function(){var e=JSON.parse(JSON.stringify(t));e.taskLists.push(o),a(e),s(null)};return $(i,(function(){s(null)})),r.a.createElement("div",{className:"list-wrapper "},o?r.a.createElement("div",{className:"list add-list",ref:i},r.a.createElement(q,{isFocused:!0,onChange:function(e){s(Object(M.a)(Object(M.a)({},o),{},Object(B.a)({},e.target.name,e.target.value)))},onSubmit:u,name:"title",type:"p"}),r.a.createElement("div",{className:"add-list-controls"},r.a.createElement("button",{className:"submit-btn",onClick:u},"Add List"),r.a.createElement("button",{onClick:function(){return s(null)},className:"clear-btn icon-lg"},r.a.createElement(K.b,null)))):r.a.createElement("button",{className:"modal-btn",onClick:function(){var e=y.getEmptyList();s(e)}},"Add another list "))};var Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=Object(o.c)(),r=Object(n.useState)(!1),c=Object(v.a)(r,2),l=c[0],s=c[1],i=Object(n.useState)(!1),u=Object(v.a)(i,2),d=u[0],b=u[1],E=Object(n.useCallback)((function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];function c(){return l.apply(this,arguments)}function l(){return(l=Object(p.a)(f.a.mark((function t(){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.prev=1,t.next=4,a(e.apply(void 0,n));case 4:return r=t.sent,b(!1),s(!1),t.abrupt("return",r);case 10:return t.prev=10,t.t0=t.catch(1),s(!1),b(!0),t.abrupt("return",t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}c()}),[e].concat(Object(m.a)(t)));return[E,l,d]},ye=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.board.currBoard})),a=Ne((function(){return e=O,function(){var t=Object(p.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.getById(e);case 3:n=t.sent,a({type:"SET_BOARD",currBoard:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.warn("cannot save board",t.t0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();var e})),c=Object(v.a)(a,3),l=c[0],s=c[1],u=c[2],d=Object(n.useRef)(!0),b=Object(n.useState)(null),E=Object(v.a)(b,2),k=(E[0],E[1]),O=Object(i.g)().boardId,g=Object(i.h)().path,j=Object(i.f)();Object(n.useEffect)((function(){l()}),[]),Object(n.useEffect)((function(){d.current&&t&&(console.log("board.",t._id),I.setup(),I.emit("board topic",t._id),I.on("update board",S),d.current=!1)}),[t]),Object(n.useEffect)((function(){return function(){I.off("update board",S),I.terminate()}}),[]),Object(n.useEffect)((function(){u&&j.push("/boards")}),[u]);var h=function(){var a=Object(p.a)(f.a.mark((function a(n){var r,c;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=JSON.parse(JSON.stringify(t)),c=r.taskLists.findIndex((function(e){return e.id===n.id})),r.taskLists.splice(c,1,n),a.next=5,e(D(r));case 5:console.log("adterupdatelist");case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),x=function(){var t=Object(p.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(D(a));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(t){e(function(e){return function(t){t({type:"SET_BOARD",currBoard:e})}}(t))},C=function(e){var a=JSON.parse(JSON.stringify(t)),n=a.taskLists.findIndex((function(t){return t.id===e}));a.taskLists.splice(n,1),x(a)},w=Object(n.useState)(null),L=Object(v.a)(w,2),T=(L[0],L[1],Object(n.useState)(null)),B=Object(v.a)(T,2),M=(B[0],B[1],function(e){var t="[".concat("data-rbd-draggable-id","='").concat(e,"']");return document.querySelector(t)});return s?r.a.createElement("div",null,"Loading..."):r.a.createElement("section",{className:"board-details"},t&&r.a.createElement(A.a,{onDragUpdate:function(e){if("task"===e.type)M(e.draggableId)},onDragEnd:function(e){var a=e.source,n=e.destination;if(n&&(a.index!==n.index||a.droppableId!==n.droppableId)){k(null);var r=Object(m.a)(t.taskLists),c=JSON.parse(JSON.stringify(t));if(a.droppableId===n.droppableId&&"board"===a.droppableId){var l=N.reorder(r,a.index,n.index);c.taskLists=l}else{var o=+a.droppableId,s=+n.droppableId;if(o===s){var i=N.reorder(r[o].tasks,a.index,n.index);c.taskLists[o].tasks=i}else{var u=N.move(r[o].tasks,r[s].tasks,a,n);c.taskLists[o].tasks=u[o],c.taskLists[s].tasks=u[s]}}x(c)}}},r.a.createElement(A.c,{droppableId:"board",type:"lists",direction:"horizontal"},(function(e,a){return r.a.createElement("div",Object.assign({className:"list-container",ref:e.innerRef},e.droppableProps),t.taskLists&&t.taskLists.map((function(e,t){return r.a.createElement(A.b,{key:e.id,draggableId:e.id,index:t,type:"lists"},(function(a,n){return r.a.createElement(Q,{taskListIdx:t,taskList:e,onRemoveList:C,onListUpdated:h,innerRef:a.innerRef,provided:a})}))})),e.placeholder,r.a.createElement(he,{board:t,onBoardUpdated:x}))}))),t&&r.a.createElement(i.a,{exact:!0,path:"".concat(g,"/:taskId"),component:je}))},xe=function(){var e=Object(o.d)((function(e){return e.board.boards})),t=Object(o.c)();return Object(n.useEffect)((function(){(function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(function(){var e=Object(p.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.query();case 2:(a=e.sent)&&t({type:"SET_BOARDS",boards:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:console.log("adsasd");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",null,r.a.createElement("h1",null,"Boards new"),e&&e.length&&e.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(s.b,{to:"board/".concat(e._id)},e._id))})))};var Se=function(){return r.a.createElement("main",null,r.a.createElement(s.a,null,r.a.createElement(d,null),r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/board/:boardId",component:ye}),r.a.createElement(i.a,{path:"/boards",component:xe}),r.a.createElement(i.a,{path:"/",component:u}))))};a(172),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ce=a(17),we=a(96),Ie={boards:null,currBoard:null,currTask:null,isExpanded:!1},De=Object(Ce.e)(Object(Ce.c)({board:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARDS":return Object(M.a)(Object(M.a)({},e),{},{boards:JSON.parse(JSON.stringify(t.boards))});case"SET_BOARD":return Object(M.a)(Object(M.a)({},e),{},{currBoard:JSON.parse(JSON.stringify(t.currBoard))});case"SET_TASK":var a;return e.currBoard.taskLists.forEach((function(e){e.tasks.find((function(e){e.id===t.id&&(a=e)}))})),Object(M.a)(Object(M.a)({},e),{},{currTask:a?Object(M.a)({},a):null});case"UPDATE_TASK":return Object(M.a)(Object(M.a)({},e),{},{currTask:Object(M.a)({},t.currTask)});case"TOGGLE_LABELS":return Object(M.a)(Object(M.a)({},e),{},{isExpanded:!e.isExpanded});default:return e}}}),Object(Ce.a)(we.a));l.a.render(r.a.createElement(o.a,{store:De},r.a.createElement(r.a.StrictMode,null,r.a.createElement(Se,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},98:function(e,t,a){e.exports=a(173)}},[[98,1,2]]]);
//# sourceMappingURL=main.db9322ca.chunk.js.map