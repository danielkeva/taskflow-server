(this["webpackJsonptreller-react"]=this["webpackJsonptreller-react"]||[]).push([[4],{186:function(e,t,a){"use strict";a.r(t);var n=a(42),c=a(2),r=a.n(c),l=a(8),o=a(28),s=a(0),i=a.n(s),u=a(16),d=a(41),m=a(3),b=a(141),f=a(136),p=a(15),v=a(52),k=a(40),g=a(4),E=(a(160),a(138)),O=a(11),j=a(142),h=function(e){var t=e.labels,a=e.onLabelClicked,n=void 0===a?null:a,c=e.expandMode,r=Object(u.c)(),l=Object(u.d)((function(e){return e.board.isExpanded})),o=function(e){e.preventDefault(),null!==n?n(e):r(Object(d.f)())};return i.a.createElement("div",{className:"labels-list"},t.map((function(e){return i.a.createElement("span",{onClick:o,key:e.id,className:"label  ".concat(l||c?"label-expand":""),style:{backgroundColor:e.color}},i.a.createElement("span",{className:"label-title"},e.title))})),c&&i.a.createElement("button",{className:"modal-btn",onClick:o},i.a.createElement(j.a,{className:"icon-md"})))},N=a(139),y=a.n(N),C=a(145),x=a(144),w=a(164),S=a(133);function I(){var e=Object(E.a)(["\n    ","\n            font-size:",";\n            font-family:",";\n\n            ","\n    "]);return I=function(){return e},e}var D=C.a.div(I(),(function(e){return e.cover.isFull?"color"===e.cover.type?{backgroundColor:e.cover.isFull?e.cover.background:""}:{backgroundImage:"url("+e.cover.background+")",minHeight:235,backgroundSize:"cover"}:""}),(function(e){return e.cover.isFull?"16px":""}),(function(e){return e.cover.isFull?"LatoBold":""}),(function(e){return e.cover.isFull?{display:"flex",fontSize:"16px",fontFamily:"LatoBold"}:""})),L={lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",sameElse:"MMMM D"},R=function(e){var t=e.task,a=e.index,n=Object(m.h)().url,c=Object(s.useMemo)((function(){return t.checklists.reduce((function(e,t){t.listItems.length>0&&(e+=t.listItems.reduce((function(e,t){return t.isDone&&e++,e}),0));return e}),0)}),[t.checklists]),r=Object(s.useMemo)((function(){return t.checklists.reduce((function(e,t){return t.listItems.length>0&&(e+=t.listItems.length),e}),0)}),[t.checklists]),l=Object(s.useMemo)((function(){console.log("isdue");var e=new Date;return e.setHours(0,0,0,0),e.setDate(e.getDate()+1),e.getTime()===t.dueDate?"due-soon":t.dueDate<=Date.now()?"over-due":""}),[t.dueDate]);return i.a.createElement(b.b,{draggableId:t.id,index:a,type:"task"},(function(e){return i.a.createElement("div",Object.assign({className:"task-preview"},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),i.a.createElement(O.b,{to:"".concat(n,"/").concat(t.id),className:"task-link",activeClassName:"active",draggable:"false"},i.a.createElement(D,{cover:t.cover},t.cover.background&&!t.cover.isFull&&i.a.createElement("div",null,"color"===t.cover.type?i.a.createElement("div",{className:t.cover.background?"task-cover":"",style:{backgroundColor:t.cover.background}}):i.a.createElement("img",{src:t.cover.background,className:"task-img-cover ratio-square "})),i.a.createElement("div",{className:"task-preview-content \n                                    ".concat("img"===t.cover.type&&t.cover.isFull?"dark"===t.cover.theme?"content-wrapper dark":"content-wrapper light":"")},t.labels&&i.a.createElement(h,{labels:t.labels}),i.a.createElement("div",{className:"task-preview-title",dir:"auto"},t.title),i.a.createElement("div",{className:"badges"},t.dueDate&&i.a.createElement("div",{className:"badge "+l},i.a.createElement(S.e,{className:"icon-sm"}),i.a.createElement(y.a,{className:"badge-text",calendar:L,date:t.dueDate})),t.description&&i.a.createElement("div",{className:"badge"},i.a.createElement(w.a,{className:"icon-md"})),t.checklists.length>0&&r>0&&i.a.createElement("div",{className:"badge checklist-items-badge "+(c===r?"task-complete":"")},i.a.createElement(j.b,{className:"icon-sm"}),i.a.createElement("span",{className:"badge-text"},c,"/",r)))))))}))};var T=function(e){var t=Object(s.useState)(!1),a=Object(o.a)(t,2),n=a[0],c=a[1];function r(t){t.key===e&&c(!0)}var l=function(t){t.key===e&&c(!1)};return Object(s.useEffect)((function(){return window.addEventListener("keydown",r),window.addEventListener("keyup",l),function(){window.removeEventListener("keydown",r),window.removeEventListener("keyup",l)}}),[]),n};var M=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(s.useEffect)((function(){var n=function(n){e&&e.current&&!e.current.contains(n.target)&&(null===a||a.current&&!a.current.contains(n.target)?t(n):console.log("exceptionalRef",a))};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,a,t])},A=function(e){var t=e.type,a=e.text,n=e.name,c=e.onInputBlur,r=e.isWide,l=e.isFocused,u=e.onChange,d=e.onSubmit,m=e.onEscape,b=e.placeholder,f=void 0===b?null:b,p=Object(s.useState)(!1),v=Object(o.a)(p,2),k=v[0],g=v[1],E=Object(s.useState)(""),O=Object(o.a)(E,2),j=O[0],h=O[1],N=Object(s.useRef)(null),y=T("Enter"),C=T("Escape");Object(s.useEffect)((function(){k&&N.current.focus()}),[k]),Object(s.useEffect)((function(){l&&g(!0),!1===l&&g(!1)}),[l,k]),Object(s.useEffect)((function(){k&&h(a)}),[k]),Object(s.useEffect)((function(){k&&!r&&(y&&(c?c():d(),g(!1)),C&&(u({target:{name:n,value:j}}),g(!1),m&&m()))}),[y,C]);var x=i.a.createElement(t,{className:"module-text  ".concat(a?"":"placeholder"),dir:"auto",onClick:function(){g(!0)}},a||f),w=function(){c&&(console.log("blur"),g(!1),c())};return i.a.createElement("div",{className:"text-editor-wrapper"},k?r?i.a.createElement("textarea",{ref:N,className:"focusClass",autoFocus:!0,rows:"5",name:n,defaultValue:a,onChange:function(e){u(e)},onBlur:w,placeholder:f}):i.a.createElement("input",{dir:"auto",type:"text",ref:N,autoFocus:!0,className:"focusClass",name:n,defaultValue:a,onChange:function(e){var t=e.target.value;/^\s+$/.test(t)||""===t||u(e)},onBlur:w}):x)},U=function(e){var t=e.onCloseMenu,a=e.onRemoveList,n=e.onAddTask;return i.a.createElement("div",{className:"pop-up list-menu"},i.a.createElement("div",{className:"pop-up-header"},i.a.createElement("span",{className:"pop-up-title"},"Labels"),i.a.createElement("button",{className:"pop-up-close-btn clear-btn",onClick:function(){return t()}},i.a.createElement(S.d,null))),i.a.createElement("div",{onClick:n},"Add card"),i.a.createElement("div",null,"Change list color"),i.a.createElement("div",null,"Sort list by"),i.a.createElement("div",{onClick:a},"Delete list"))},J=a(19),z=function(e){var t=e.provided,a=e.innerRef,n=e.taskList,c=e.taskListIdx,u=e.onListUpdated,d=e.onRemoveList,p=Object(s.useState)(Object(g.a)({},n)),v=Object(o.a)(p,2),E=v[0],O=v[1],j=Object(s.useState)(null),h=Object(o.a)(j,2),N=h[0],y=h[1],C=Object(s.useState)(!1),x=Object(o.a)(C,2),w=x[0],I=x[1],D=Object(m.h)().url,L=Object(s.useState)(!1),T=Object(o.a)(L,2),z=T[0],B=T[1],F=Object(s.useRef)(null);Object(s.useEffect)((function(){O(Object(g.a)({},n))}),[n]);var P=function(){B(!1);var e=J.a.getEmptyTask();y(e),I(!0)},_=function(e){y(Object(g.a)(Object(g.a)({},N),{},Object(k.a)({},e.target.name,e.target.value)))},H=function(e,t){if(e)u(e,t);else{if(E.title===n.title)return;u(E)}I(!1),y(null)},W=function(){var e=Object(l.a)(r.a.mark((function e(){var t,a,n,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:null,!N||!N.title){e.next=11;break}return(a=JSON.parse(JSON.stringify(E))).tasks.push(N),n=J.a.newActivity("Added this card to ".concat(a.title),'Added  <a href="#'.concat(D,"/").concat(N.id,'">').concat(N.title,"</a> to ").concat(a.title),N.id),e.next=7,H(a,n);case 7:if("clickedOutside"!==t){e.next=9;break}return e.abrupt("return");case 9:y(null),P();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();M(F,(function(){w&&N&&N.title?W("clickedOutside"):q()}));var q=function(){y(null),I(!1)};return E&&i.a.createElement("div",Object.assign({className:"list-wrapper",ref:a},t.draggableProps),i.a.createElement("div",{className:"list"},i.a.createElement("div",Object.assign({className:"list-header"},t.dragHandleProps),E.title&&i.a.createElement(A,{name:"title",type:"h3",text:E.title,onChange:function(e){O(Object(g.a)(Object(g.a)({},E),{},Object(k.a)({},e.target.name,e.target.value)))},onInputBlur:H}),i.a.createElement("button",{className:"list-menu-btn clear-btn",onClick:function(){return B(!z)}},i.a.createElement(f.a,null)),z&&!w&&i.a.createElement(U,{onRemoveList:function(){d(n.id)},onAddTask:P,onCloseMenu:function(){return B(!1)}})),i.a.createElement("div",{className:"overs"},i.a.createElement(b.c,{type:"task",droppableId:"".concat(c)},(function(e){return i.a.createElement("div",{className:"list-content custom-scrollbar",ref:e.innerRef},n.tasks.map((function(e,t){return i.a.createElement(R,{key:e.id,task:e,index:t})})),w&&N&&i.a.createElement("div",{className:"add-task-wrapper ",ref:F},i.a.createElement(A,{name:"title",type:"p",text:N.title,onChange:_,isFocused:w,onSubmit:W,onEscape:q}),i.a.createElement("div",{className:"add-task-controls"},i.a.createElement("button",{onClick:W,className:"submit-btn"},"Add task"),i.a.createElement("button",{onClick:q,className:"clear-btn icon-lg"},i.a.createElement(S.d,null)))),e.placeholder)}))),i.a.createElement("div",{className:"list-footer"},!w&&!N&&i.a.createElement("a",{className:"clear-btn list-footer-btn",onClick:P},i.a.createElement("span",{className:"icon-lg add-icon"},i.a.createElement(S.a,null))," ",i.a.createElement("span",null,"Add new task")))))},B=a(149),F=a.n(B),P=a(172),_=function(e){var t=e.task,a=e.labels,c=e.onCloseModal,r=e.onTaskUpdated,l=e.labelsUpdated,u=e.bounds,d=e.exceptionRef,m=Object(s.useState)(null),b=Object(o.a)(m,2),f=b[0],p=b[1],v=Object(s.useState)(!1),E=Object(o.a)(v,2),O=E[0],j=E[1],h=Object(s.useRef)(null);M(h,(function(){c()}),d);var N=function(e){p(Object(g.a)(Object(g.a)({},f),{},Object(k.a)({},e.target.name,e.target.value)))},y=function(){var e=Object(n.a)(a),t=e.findIndex((function(e){return e.id===f.id}));e.splice(t,1,f),l(Object(n.a)(e),f),j(!1),p(null)};Object(s.useEffect)((function(){if(!O&&f){var e=JSON.parse(JSON.stringify(t)),a=e.labels.findIndex((function(e){return e.id===f.id}));-1!==a&&(e.labels.splice(a,1,f),r(e))}}),[O]);var C=function(e){if(f)return e.id===f.id};return i.a.createElement("div",{className:"pop-up labels",ref:h,style:u},i.a.createElement("div",{className:"pop-up-header"},i.a.createElement("span",{className:"pop-up-title"},"Labels"),i.a.createElement("button",{className:"pop-up-close-btn clear-btn icon-lg",onClick:c},i.a.createElement(S.d,null))),i.a.createElement("ul",null,a.map((function(e){return i.a.createElement("li",{className:"label-container",key:e.id},i.a.createElement("span",{className:"card-label",style:{backgroundColor:e.color},onClick:function(){return function(e){var a=JSON.parse(JSON.stringify(t));if(a.labels.find((function(t){return t.id===e.id}))){var n=a.labels.findIndex((function(t){return t.id===e.id}));a.labels.splice(n,1)}else a.labels.push(e);r(a)}(e)}},!C(e)&&i.a.createElement("span",{className:"label-title"},e.title),C(e)&&O&&i.a.createElement(A,{type:"p",name:"title",isFocused:O,text:e.title,onChange:N,onInputBlur:y}),i.a.createElement("span",{className:"label-selected"})),i.a.createElement("button",{className:"clear-btn",onClick:function(){return function(e){null!==f&&f.id===e.id?j(!1):(p(Object(g.a)({},e)),j(!0))}(e)}},i.a.createElement(P.a,null)))}))))},H=a(143),W=a.n(H),q=a(184),G=(a(173),function(e){var t=e.task,a=e.onTaskUpdated,n=e.onCloseModal,c=e.bounds,u=e.exceptionRef,d=Object(s.useState)(new Date),b=Object(o.a)(d,2),f=b[0],p=b[1],v=Object(m.h)().url,k=Object(s.useRef)(null);Object(s.useEffect)((function(){if(t.dueDate){var e=new Date(t.dueDate);p(e)}}),[]),M(k,(function(){n()}),u);var g=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=W()(new Date(e)).format("MMM Do");return t.dueDate?J.a.newActivity("Changed the due date of this card to  ".concat(n),'Changed <a href="#'.concat(v,'">').concat(t.title,"</a> to be due at ").concat(n),t.id):a?J.a.newActivity("Removed the due date from this card",'Removed <a href="'.concat(v,'">').concat(t.title,"</a> due date"),t.id):J.a.newActivity("Set this card to be due at ".concat(n),'Set <a href="'.concat(v,'">').concat(t.title,"</a> to be due at ").concat(n," "),t.id)},E=function(){var e=Object(l.a)(r.a.mark((function e(){var c,l,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((c=f.getTime())!==t.dueDate){e.next=3;break}return e.abrupt("return");case 3:return(l=JSON.parse(JSON.stringify(t))).dueDate=c,o=g(c),e.next=8,a(l,o);case 8:n();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"pop-up",style:c,ref:k},i.a.createElement("div",{className:"pop-up-header"},i.a.createElement("span",{className:"pop-up-title"},"Date"),i.a.createElement("button",{onClick:n,className:"pop-up-close-btn clear-btn icon-lg"},i.a.createElement(S.d,null))),i.a.createElement(q.a,{onChange:function(e){p(e)},value:f}),i.a.createElement("button",{onClick:E,className:"submit-btn add-date-btn"},"Save"))});function Y(e){return function(t){t({type:"TOGGLE_INITIAL_ADDITION",isInitial:e})}}var V=function(e){var t=e.task,a=e.onTaskUpdated,n=e.onCloseModal,c=e.bounds,r=e.sidebarRef,l=Object(s.useState)({}),d=Object(o.a)(l,2),b=d[0],f=d[1],p=Object(s.useRef)(null),v=Object(m.h)().url,E=Object(u.c)();Object(s.useEffect)((function(){var e=J.a.getEmptyCheckList();f(Object(g.a)({},e))}),[]),M(p,(function(){n()}),r);var O=function(){var e=JSON.parse(JSON.stringify(t)),c=Object(g.a)({},b);e.checklists.push(c);var r=J.a.newActivity("Added ".concat(b.title,"  on this card"),"Added ".concat(b.title,' on <a href="#').concat(v,'">').concat(t.title,"</a>"),t.id);a(e,r),E(Y(!0)),n()};return i.a.createElement("div",{className:"pop-up",style:c,ref:p},i.a.createElement("div",{className:"pop-up-header"},i.a.createElement("span",{className:"pop-up-title"},"Add checklist"),i.a.createElement("button",{className:"pop-up-close-btn clear-btn"})),i.a.createElement(A,{isFocused:!0,onChange:function(e){f(Object(g.a)(Object(g.a)({},b),{},Object(k.a)({},e.target.name,e.target.value)))},onSubmit:O,type:"p",name:"title"}),i.a.createElement("button",{onClick:O,className:"submit-btn add-date-btn"},"Save"))},X=a(175),$=a.n(X),K={uploadImg:function(e){console.log("yes");var t="https://api.cloudinary.com/v1_1/".concat("dhz1jk4k6","/image/upload"),a=new FormData;return a.append("file",e.target.files[0]),a.append("upload_preset","jtim2mm3"),fetch(t,{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e)}))}};function Q(){var e=Object(E.a)(["\n","\n"]);return Q=function(){return e},e}function Z(){var e=Object(E.a)(["\n","\n"]);return Z=function(){return e},e}var ee=C.a.div(Z(),(function(e){return"color"===e.cover.type?{backgroundColor:e.cover.background}:{backgroundImage:"url("+e.cover.background+")",backgroundSize:"cover"}})),te=C.a.div(Q(),(function(e){return"color"===e.cover.type?{backgroundColor:e.cover.background}:{backgroundImage:"light"===e.cover.theme?"linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)),url("+e.cover.background+")":"linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),url("+e.cover.background+")",backgroundSize:"cover",backgroundPosition:"50%"}})),ae=function(e){var t=e.task,a=e.onCloseModal,n=e.onTaskUpdated,c=e.bounds,u=e.exceptionRef,d=Object(s.useState)(t.cover),m=Object(o.a)(d,2),b=m[0],f=m[1],v=Object(s.useState)(!1),k=Object(o.a)(v,2),E=k[0],O=k[1],j=Object(s.useRef)(null);M(j,(function(){a()}),u);var h=function(e){var a=Object(g.a)({},t);e.id?(f(Object(g.a)(Object(g.a)({},b),{},{background:e.url,type:"img"})),a.cover.type="img",a.cover.background=e.url):(f(Object(g.a)(Object(g.a)({},b),{},{background:e,type:"color"})),a.cover.type="color",a.cover.background=e),n(a)},N=function(e){if(t.cover.background){f(Object(g.a)(Object(g.a)({},b),{},{isFull:e}));var a=Object(g.a)({},t);a.cover.isFull=e,n(a)}},y=function(e){if(e!==b.theme){f(Object(g.a)(Object(g.a)({},b),{},{theme:e}));var a=Object(g.a)({},t);a.cover.theme=e,n(a)}},C=function(){var e=Object(l.a)(r.a.mark((function e(a){var c,l,o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("yes mame"),O(!0),e.next=4,K.uploadImg(a);case 4:c=e.sent,l=c.url,f(Object(g.a)(Object(g.a)({},b),{},{background:l,type:"img"})),o=Object(g.a)({},t),s={id:p.a.makeId(),url:l,isCover:!0},o.images.push(s),o.cover.background=l,o.cover.type="img",n(o),O(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"pop-up cover-picker ".concat(c?"":"absolute"),ref:j,style:c},i.a.createElement("div",{className:"pop-up-header"},i.a.createElement("span",{className:"pop-up-title"},"Cover"),i.a.createElement("button",{className:"pop-up-close-btn clear-btn icon-lg",onClick:a},i.a.createElement(S.d,null))),i.a.createElement("span",{className:"pop-up-title"},"Size"),i.a.createElement("div",{className:"cover-size-picker"},i.a.createElement(te,{cover:b,className:"cover-size "+(t.cover.background?b.isFull?"selected":"":"disabled"),onClick:function(){return N(!0)}},i.a.createElement("div",{className:"line-wrapper ".concat("img"===t.cover.type&&"dark"===t.cover.theme?"dark":"")},i.a.createElement("div",{className:"line line1"}),i.a.createElement("div",{className:"line line2"}),i.a.createElement("div",{className:"line line3"}))),i.a.createElement("div",{className:"cover-size half "+(t.cover.background?b.isFull?"":"selected":"disabled"),onClick:function(){return N(!1)}},i.a.createElement(ee,{className:"half",cover:b}),i.a.createElement("div",{className:"line-wrapper"},i.a.createElement("div",{className:"line line1"}),i.a.createElement("div",{className:"line line2"}),i.a.createElement("div",{className:"line line3"})))),t.cover.background&&i.a.createElement("button",{className:"modal-btn",onClick:function(){f(Object(g.a)(Object(g.a)({},b),{},{background:null,type:null,isFull:null,theme:null}));var e=Object(g.a)({},t);e.cover=Object(g.a)(Object(g.a)({},e.cover),{},{background:null,type:null,isFull:null,theme:null}),n(e),a()}},"Remove Cover"),"img"===b.type&&b.isFull&&i.a.createElement("div",{className:"cover-txt-color"},i.a.createElement("span",{className:"pop-up-title"},"Text color"),i.a.createElement("div",{className:"flex justify-center"},i.a.createElement("div",{onClick:function(){return y("light")},className:"cover-txt light",style:{backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)),url(".concat(b.background,")")}},i.a.createElement("h3",null,t.title)),i.a.createElement("div",{onClick:function(){return y("dark")},className:"cover-txt dark",style:{backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),url(".concat(b.background,")")}},i.a.createElement("h3",null,t.title)))),i.a.createElement("span",{className:"pop-up-title"},"Colors"),i.a.createElement("div",{className:"cover-palette"},["#61bd4f","#f2d600","#ff9f1a","#c377e0","#eb5a46","#055a8c","#705cc1","#00c2e0","#ff78cb"].map((function(e,t){return i.a.createElement("span",{className:"cover-color "+(e===b.background?"selected":""),style:{backgroundColor:e},key:t,onClick:function(){return h(e)}})}))),t.images.length>0&&i.a.createElement("span",{className:"pop-up-title"},"Images"),t.images.length>0&&i.a.createElement("div",{className:"cover-img-wrapper"},t.images.map((function(e){return i.a.createElement("span",{className:"cover-img-preview "+(e.url+e.id===b.background+e.id?"selected":""),style:{backgroundImage:"url(".concat(e.url,")")},onClick:function(){return h(e)},key:e.id})}))),i.a.createElement("div",{className:"upload-img-container flex space-between align-center"},i.a.createElement("p",null,"Upload image:"),i.a.createElement("input",{onChange:C,id:"file",type:"file",title:"Upload Image"}),i.a.createElement("label",{className:"btn-3",htmlFor:"file"},E?i.a.createElement($.a,{height:9,width:5,color:"#2c3e50",loading:E}):i.a.createElement("span",null,"Upload"))),i.a.createElement("hr",{className:"divider"}))},ne=function(e){var t=e.task,a=e.labels,n=e.onUpdateTask,c=e.onLabelsUpdated,r=e.onAddActivity,l=Object(s.useRef)(null),u=Object(s.useState)(null),d=Object(o.a)(u,2),m=d[0],b=d[1],f=Object(s.useState)(null),p=Object(o.a)(f,2),v=p[0],k=p[1],g=Object(s.useRef)(null),E=function(e,t){g.current=e.target.id;var a=e.target.getBoundingClientRect(),n=a.top,c=a.left,r=a.height;window.innerWidth-c-304<50&&window.innerWidth>770?k({top:n+r,left:c-100}):k({top:n+r,left:c-50}),t===m?(b(null),k(null),g.current=null):b(t)},O=Object(s.useCallback)((function(){if(g.current){var e=document.getElementById(g.current).getBoundingClientRect(),t=e.top,a=e.left,n=e.height,c=window.innerWidth-a-304;k(c<50?{top:t+n,right:0}:{top:t+n,left:a})}}),[]);Object(s.useEffect)((function(){m?window.addEventListener("resize",O):window.removeEventListener("resize",O)}),[m]);var j=function(){b(null),g.current=null};return i.a.createElement("div",{className:"modal-sidebar",ref:l},i.a.createElement("h3",null,"Add to card"),i.a.createElement("button",{id:"sidebar-labels",className:"modal-btn",onClick:function(e){return E(e,"isLabelActive")}},"Labels"),"isLabelActive"===m&&i.a.createElement(_,{bounds:v,task:t,labels:a,onCloseModal:j,onTaskUpdated:n,labelsUpdated:c,exceptionRef:l}),i.a.createElement("button",{className:"modal-btn"},"Members"),i.a.createElement("button",{id:"sidebar-checklist",className:"modal-btn",onClick:function(e){return E(e,"isChecklistActive")}},"Checklist"),"isChecklistActive"===m&&i.a.createElement(V,{task:t,bounds:v,onTaskUpdated:n,onCloseModal:j,exceptionRef:l}),i.a.createElement("button",{id:"sidebar-date",className:"modal-btn",onClick:function(e){return E(e,"isDueDateActive")}},"Due date"),"isDueDateActive"===m&&i.a.createElement(G,{bounds:v,task:t,onTaskUpdated:n,onAddActivity:r,onCloseModal:j,exceptionRef:l}),!t.cover.background&&i.a.createElement("button",{id:"sidebar-cover",className:"modal-btn",onClick:function(e){return E(e,"isCoverActive")}},"Cover"),"isCoverActive"===m&&i.a.createElement(ae,{bounds:v,exceptionRef:l,task:t,onCloseModal:j,onTaskUpdated:n}))},ce=function(e){var t=e.item,a=e.onSubmit,n=e.onRemoveItem,c=e.task,r=Object(s.useState)(Object(g.a)({},t)),l=Object(o.a)(r,2),u=l[0],d=l[1],b=Object(s.useState)(!1),p=Object(o.a)(b,2),v=p[0],E=p[1],O=Object(s.useState)(!1),j=Object(o.a)(O,2),h=j[0],N=j[1],y=Object(s.useState)(""),C=Object(o.a)(y,2),x=C[0],w=C[1],I=Object(s.useRef)(null),D=Object(s.useRef)(!0),L=Object(m.h)().url;M(I,(function(){v&&(console.log("imhere",v),t.title!==u.title&&(w(u.title),d((function(e){return Object(g.a)(Object(g.a)({},e),{},{title:t.title})})),N(!0)),E(!1))})),Object(s.useEffect)((function(){if(D.current)D.current=!1;else{var e=J.a.newActivity("".concat(u.isDone?"Completed  ".concat(t.title," on this card"):"Marked ".concat(t.title," incomplete on this card")),"".concat(u.isDone?"Completed  ".concat(t.title,' on <a href="#').concat(L,'">').concat(c.title,"</a>"):"Marked ".concat(t.title,' incomplete on <a href="#').concat(L,'">').concat(c.title,"</a>")),c.id);U(e)}}),[u.isDone]);var R=function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;d(Object(g.a)(Object(g.a)({},u),{},Object(k.a)({},n,a)))},T=function(){E(!1)},U=function(e){u.title?(E(!1),N(!1),a(Object(g.a)({},u),e)):E(!0)};return i.a.createElement("div",{className:"checklist-item"},i.a.createElement("div",{className:"checklist-item-editor  "+(u.isDone?"done":"")},u&&!v&&i.a.createElement("input",{type:"checkbox",name:"isDone",checked:u.isDone,onChange:R}),i.a.createElement("div",{className:"item-title",onClick:function(){return E(!0)},ref:I},i.a.createElement(A,{text:u.title,onChange:R,onSubmit:U,onEscape:T,isFocused:v,type:"p",name:"title"}),v&&i.a.createElement("div",{className:"add-item-controls"},i.a.createElement("button",{className:"submit-btn"},"Save"),i.a.createElement("button",{className:"clear-btn icon-lg",onClick:T},i.a.createElement(S.d,null)),i.a.createElement("div",{className:"spacer",onClick:T}))),!v&&i.a.createElement("button",{className:"remove-item-btn clear-btn",onClick:function(){n(u.id)}},i.a.createElement(f.b,null))),h&&!v&&i.a.createElement("p",{className:"checklist-user-msg"},i.a.createElement("span",null,"You have unsaved edits on this field."),i.a.createElement("button",{className:"clear-btn",onClick:function(){d((function(e){return Object(g.a)(Object(g.a)({},e),{},{title:x})})),E(!0)}},"View edits"),i.a.createElement("button",{className:"clear-btn",onClick:function(){N(!1)}},"Discard")))},re=a(180),le=(a(181),function(e){var t=e.task,a=e.checklist,n=e.onUpdateTask,c=Object(s.useState)(null),d=Object(o.a)(c,2),b=d[0],f=d[1],p=Object(s.useState)(a.title),v=Object(o.a)(p,2),E=v[0],O=v[1],j=Object(s.useState)(null),h=Object(o.a)(j,2),N=h[0],y=h[1],C=Object(s.useState)(!1),x=Object(o.a)(C,2),w=x[0],I=x[1],D=Object(s.useRef)(null),L=Object(m.h)().url,R=Object(u.c)(),T=Object(u.d)((function(e){return e.general.isInitialAddition}));Object(s.useEffect)((function(){T&&U()}),[]),Object(s.useEffect)((function(){var e=a.listItems.reduce((function(e,t){return t.isDone&&e++,e}),0),t=Math.round(100*e/a.listItems.length);y(t)}),[a]);var U=function(){var e=J.a.getEmptyListItem();f(e),I(!0),T&&R(Y(!1))},z=function(){I(!1),f(null)};M(D,(function(){w&&(I(!1),f(null))}));var B=function(e){var t=Object(g.a)({},a),n=t.listItems.findIndex((function(t){return t.id===e}));-1!==n&&t.listItems.splice(n,1),P(t)},F=function(){var e=Object(l.a)(r.a.mark((function e(t,n){var c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(g.a)({},a),!t){e.next=9;break}if(-1===(l=c.listItems.findIndex((function(e){return e.id===t.id})))){e.next=7;break}return c.listItems.splice(l,1,t),e.next=7,P(c,n);case 7:e.next=16;break;case 9:if(b.title){e.next=12;break}return z(),e.abrupt("return");case 12:return c.listItems.push(b),e.next=15,P(c);case 15:U();case 16:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),P=function(e,c){var r=JSON.parse(JSON.stringify(t));if(e){var l=r.checklists.findIndex((function(t){return t.id===e.id}));r.checklists.splice(l,1,e)}else r.checklists=r.checklists.filter((function(e){return e.id!==a.id})),c=J.a.newActivity("Removed ".concat(a.title,"  on this card"),"Removed ".concat(a.title,' on <a href="#').concat(L,'">').concat(t.title,"</a>"),t.id);n(r,c),I(!1),f(null)};return i.a.createElement("div",{className:"task-checklist"},i.a.createElement("div",{className:"section-title flex align-center"},i.a.createElement(A,{text:E,onChange:function(e){O(e.target.value)},onInputBlur:function(){var e=Object(g.a)({},a);e.title=E;var n=J.a.newActivity("Renamed ".concat(e.title," from (").concat(a.title,")"),"Renamed ".concat(e.title," from (").concat(a.title,') on <a href="#').concat(L,'">').concat(t.title,"</a>"),t.id);P(e,n)},type:"h3"}),i.a.createElement("button",{className:"modal-btn",onClick:function(){return P()}},"Delete")),a.listItems.length>0&&i.a.createElement(re.Progress,{percent:N}),a&&a.listItems.map((function(e){return i.a.createElement(ce,{key:e.id,onSubmit:F,onRemoveItem:B,item:e,task:t})})),b&&w&&i.a.createElement("div",{className:"add-item",ref:D},i.a.createElement(A,{onChange:function(e){f(Object(g.a)(Object(g.a)({},b),{},Object(k.a)({},e.target.name,e.target.value)))},onSubmit:F,onEscape:z,isFocused:w,type:"p",name:"title"}),i.a.createElement("div",{className:"add-item-controls"},i.a.createElement("button",{className:"submit-btn",onClick:function(){return F()}},"Save"),i.a.createElement("button",{className:"clear-btn icon-lg",onClick:z},i.a.createElement(S.d,null)),i.a.createElement("div",{className:"spacer",onClick:z}))),!w&&i.a.createElement("button",{className:"modal-btn",onClick:U},"Add an item"))}),oe={lastDay:"[Yesterday at] LT",sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",lastWeek:"[last] dddd [at] LT",nextWeek:"dddd [at] LT",sameElse:"MMMM D [at] LT"},se=function(e){var t=e.taskId,a=void 0===t?null:t,n=Object(x.a)((function(e){return e.board.currBoard.activities}),(function(e){return a?e.filter((function(e){return e.taskId===a})):e})),c=Object(u.d)(n),r=Object(s.useState)(!0),l=Object(o.a)(r,2),d=l[0],m=l[1],b=Object(s.useState)(!0),f=Object(o.a)(b,2),p=f[0],v=f[1],k=Object(s.useState)(c.slice(0,5)),g=Object(o.a)(k,2),E=g[0],O=g[1],j=Object(s.useState)(5),h=Object(o.a)(j,2),N=h[0],C=h[1];Object(s.useEffect)((function(){O(c.slice(0,5)),v(!0),C(5)}),[c.length]);return i.a.createElement("div",{className:"activity-log"},a&&i.a.createElement("button",{className:"modal-btn",onClick:function(){m((function(e){return!e}))}},d?"Hide details":"Show details"),d&&E.length>0&&E.map((function(e){return i.a.createElement("div",{className:"activity-content",key:e.id},a?i.a.createElement("p",{className:"activity-desc",dangerouslySetInnerHTML:{__html:e.cardTxt}}):i.a.createElement("p",{className:"activity-desc",dangerouslySetInnerHTML:{__html:e.boardTxt}}),i.a.createElement(y.a,{calendar:oe},e.date))})),d&&p&&c.length>5&&i.a.createElement("button",{className:"clear-btn show-more-btn",onClick:function(){console.log("firstinDEX:",N);var e=N+5,t=e<=c.length-1;console.log("activities: ",c," index: ",N," newIndex: ",e);var a=E.concat(c.slice(N,e));C(e),O(a),v(t)}}," Load More "))},ie={lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",sameElse:"MMMM D"},ue=function(){var e=Object(u.c)(),t=Object(u.d)((function(e){return e.board.currTask})),a=Object(u.d)((function(e){return e.board.currBoard})),n=Object(s.useState)(null),c=Object(o.a)(n,2),b=c[0],f=c[1],p=Object(s.useState)(null),v=Object(o.a)(p,2),E=v[0],O=v[1],j=Object(s.useRef)(null),N=Object(s.useRef)(null),C=Object(s.useRef)(null),x=Object(m.g)().taskId,w=Object(m.f)(),I=Object(m.h)().url;Object(s.useEffect)((function(){(function(){var t=Object(l.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Object(d.c)(x));case 2:t.sent||w.push("/board/".concat(a._id));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(s.useEffect)((function(){return document.body.style.overflowX="hidden",function(){document.body.style.overflowX="unset"}}),[]),Object(s.useEffect)((function(){t&&O(Object(g.a)({},t))}),[t]);var D=function(){w.push("/board/".concat(a._id))};M(j,(function(){console.log("paam ahat"),D()})),M(N,(function(){console.log("paam ahat"),f(null)}));var L=function(e){O(Object(g.a)(Object(g.a)({},E),{},Object(k.a)({},e.target.name,e.target.value)))},R=function(){var e=Object(l.a)(r.a.mark((function e(t){var a,n=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.length>1&&void 0!==n[1]?n[1]:null,!t){e.next=6;break}return e.next=4,T(Object(g.a)({},t),a);case 4:e.next=7;break;case 6:T(Object(g.a)({},E));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var t=Object(l.a)(r.a.mark((function t(n,c){var l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(d.g)(n)),l=JSON.parse(JSON.stringify(a)),c&&l.activities.unshift(c),l.taskLists.forEach((function(e){var t=e.tasks.findIndex((function(e){return e.id===n.id}));-1!==t&&e.tasks.splice(t,1,n)})),t.next=6,e(Object(d.d)(l));case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),U=function(t,n){var c=JSON.parse(JSON.stringify(a));c.labels=t,c.taskLists.forEach((function(e){e.tasks.forEach((function(e){var t=e.labels.find((function(e){return e.id===n.id}));t&&(t.title=n.title)}))})),e(Object(d.d)(c))},z=function(){var t=Object(l.a)(r.a.mark((function t(n){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(c=JSON.parse(JSON.stringify(a))).activities.unshift(n),t.next=4,e(Object(d.d)(c));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B=function(e,t){var a=e.target;if(C.current=a,t===b)return f(null),void console.log("yes same");f(t)},P=Object(s.useMemo)((function(){if(t){console.log("hi");var e=new Date;return e.setHours(0,0,0,0),e.setDate(e.getDate()+1),t.isDone?{class:"task-complete",txt:"Complete"}:e.getTime()===t.dueDate?{class:"due-soon",txt:"Due soon"}:t.dueDate<=Date.now()?{class:"over-due",txt:"Over due"}:""}}),[t]);return i.a.createElement("div",{className:"task-details"},i.a.createElement("div",{className:"cover"}),E&&t&&i.a.createElement("div",{className:"task-modal",ref:j},E.cover.background&&i.a.createElement(F.a,{src:E.cover.background,crossOrigin:"anonymous",format:"hex"},(function(e){var t=e.data;return i.a.createElement("div",{className:"modal-header ",style:{backgroundImage:"url(".concat(E.cover.background,")"),backgroundColor:t||E.cover.background}},E.cover.background&&i.a.createElement("button",{className:"modal-btn",onClick:function(e){return B(e,"coverPicker")}},"Cover"),"coverPicker"===b&&i.a.createElement(ae,{task:E,onTaskUpdated:R,onCloseModal:function(){return B("coverPicker")},wrapperRef:N,exceptionRef:C}))})),i.a.createElement("a",{onClick:D,className:"modal-close-btn icon-lg"},i.a.createElement(S.d,null)),i.a.createElement("div",{className:"modal-module"},i.a.createElement("div",{className:"task-title"},i.a.createElement(A,{type:"h3",name:"title",text:E.title,onChange:L,onInputBlur:R}))),i.a.createElement("div",{className:"task-content"},i.a.createElement("div",{className:"left-side"},i.a.createElement("div",{className:"modal-module"},i.a.createElement("div",{className:"task-labels-date"},E.labels.length>0&&i.a.createElement("div",{className:"task-labels"},i.a.createElement("h3",{className:"task-item-title"},"Labels"),i.a.createElement("div",{className:"task-labels-list"},i.a.createElement(h,{expandMode:!0,onLabelClicked:function(e){return B(e,"labelPicker")},labels:E.labels})),"labelPicker"===b&&i.a.createElement(_,{task:E,onTaskUpdated:R,labelsUpdated:U,onCloseModal:function(){return B("labelPicker")},labels:a.labels,exceptionRef:C})),E.dueDate&&i.a.createElement("div",{className:"task-due-date"},i.a.createElement("h3",{className:"task-item-title"},"Due date"),i.a.createElement("div",{className:"modal-btn",onClick:function(e){return B(e,"datePicker")}},i.a.createElement("label",null,i.a.createElement("input",{className:"css-checkbox",type:"checkbox",name:"isDone",checked:E.isDone,onChange:function(e){e.stopPropagation(),e.preventDefault();var t=e.target.checked,a=Object(g.a)({},E);a.isDone=t;var n=J.a.newActivity("Marked the due date ".concat(a.isDone?"complete":"incomplete"),"Marked the due date ".concat(a.isDone?"complete":"incomplete"," on <a href='#").concat(I,"'>").concat(a.title,"</a>"),a.id);T(a,n)}}),i.a.createElement("i",null)),i.a.createElement(y.a,{calendar:ie,date:E.dueDate}),i.a.createElement("span",{className:"task-badge "+(P?P.class:"")},P.txt),i.a.createElement(S.b,{className:"icon-lg"})),"datePicker"===b&&i.a.createElement(G,{task:E,onTaskUpdated:R,exceptionRef:C,onCloseModal:function(){return B("datePicker")}})))),i.a.createElement("div",{className:"modal-module"},i.a.createElement("div",{className:"task-description"},i.a.createElement("h3",{className:"section-title"},"Description"),i.a.createElement(A,{type:"p",name:"description",text:E.description,onChange:L,onInputBlur:R,isWide:!0,placeholder:"Add a more detailed description\u2026"}))),E.checklists.length>0&&i.a.createElement("div",{className:"modal-module"},E.checklists.map((function(e){return i.a.createElement(le,{checklist:e,key:e.id,task:E,onUpdateTask:R})}))),i.a.createElement("div",{className:"modal-module"},i.a.createElement("h3",{className:"section-title"},"Activity"),i.a.createElement(se,{taskId:E.id}))),i.a.createElement("div",{className:"right-side"},a&&i.a.createElement(ne,{task:E,labels:a.labels,onUpdateTask:R,onLabelsUpdated:U,onAddActivity:z})))))},de=function(e){var t=e.board,a=e.onBoardUpdated,n=Object(s.useState)(null),c=Object(o.a)(n,2),r=c[0],l=c[1],u=Object(s.useRef)(null),d=function(){if(r.title){var e=JSON.parse(JSON.stringify(t));e.taskLists.push(r),a(e),l(null)}};return M(u,(function(){l(null)})),i.a.createElement("div",{className:"list-wrapper "},r?i.a.createElement("div",{className:"list add-list",ref:u},i.a.createElement(A,{isFocused:!0,onChange:function(e){l(Object(g.a)(Object(g.a)({},r),{},Object(k.a)({},e.target.name,e.target.value)))},onSubmit:d,name:"title",type:"p"}),i.a.createElement("div",{className:"add-list-controls"},i.a.createElement("button",{className:"submit-btn",onClick:d},"Add List"),i.a.createElement("button",{onClick:function(){return l(null)},className:"clear-btn icon-lg"},i.a.createElement(S.d,null)))):i.a.createElement("button",{className:"modal-btn",onClick:function(){var e=J.a.getEmptyList();l(e)}},"Add another list "))},me=a(183),be=a(182),fe=a.n(be),pe=a(140);function ve(){var e=Object(E.a)(["\n  position: fixed;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n"]);return ve=function(){return e},e}var ke=Object(pe.css)(ve()),ge=function(e){var t=e.onGoBack,a=e.board,n=e.onBoardUpdated,c=Object(s.useState)(null),r=Object(o.a)(c,2),l=r[0],u=r[1],d=Object(s.useState)(!1),m=Object(o.a)(d,2),b=m[0],f=(m[1],function(e,t){if(e!==a.style.background){var c=JSON.parse(JSON.stringify(a));c.style={background:e,type:t},n(c)}});return i.a.createElement("div",{className:"board-menu-bg-picker"},console.log("rednered"),i.a.createElement("button",{className:"pop-up-back-btn clear-btn icon-lg",onClick:function(){l?u(null):t()}},i.a.createElement(S.c,null)),!l&&i.a.createElement("div",{className:"bg-picker-controls"},i.a.createElement("div",{className:"bg-picker-btn",onClick:function(){return u("photos")}},i.a.createElement("span",{className:"photos image"}),i.a.createElement("span",{className:"bg-btn-title"},"Photos")),i.a.createElement("div",{className:"bg-picker-btn",onClick:function(){return u("colors")}},i.a.createElement("span",{className:"colors image"}),i.a.createElement("span",{className:"bg-btn-title"},"Colors"))),i.a.createElement(fe.a,{css:ke,size:15,color:"#2c3e50",loading:b}),"photos"===l&&i.a.createElement("div",{className:"bg-section-wrapper"},["https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389449/Taskflow%20backgrounds/cacjncpn6qp4qivznyaj.jpg","https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389449/Taskflow%20backgrounds/jukyghlsvncbyovcqvce.jpg","https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389422/Taskflow%20backgrounds/2.jpg","https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389420/Taskflow%20backgrounds/itjhqv6u26jigvxmzwsi.jpg","https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389420/Taskflow%20backgrounds/sltgv2lrkmcbivdxxmb3.jpg","https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389410/Taskflow%20backgrounds/yeozivyoaywjmj4hciwp.jpg","https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389409/Taskflow%20backgrounds/idhd2wg760g7xa8vsze2.jpg","https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389400/Taskflow%20backgrounds/t9jpmstlb7oaijmbynmw.jpg","https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389394/Taskflow%20backgrounds/ponbl1heu65x22wus4ui.jpg","https://res.cloudinary.com/dhz1jk4k6/image/upload/v1601389391/Taskflow%20backgrounds/nnobztxqgr82swa61ne4.jpg"].map((function(e,t){return i.a.createElement("span",{style:{backgroundImage:"url(".concat(e,")")},className:"bg-item",key:t,onClick:function(){return f(e,"img")}})}))),"colors"===l&&i.a.createElement("div",{className:"bg-section-wrapper"},["#61bd4f","#f2d600","#ff9f1a","#c377e0","#eb5a46","#055a8c","#705cc1","#00c2e0","#ff78cb"].map((function(e,t){return i.a.createElement("span",{className:"bg-item",style:{backgroundColor:e},key:t,onClick:function(){return f(e,"color")}})}))))},Ee=function(e){var t=e.isMenuOpen,a=e.closeMenu,n=e.menuBtnRef,c=e.board,r=e.onBoardUpdated,l=Object(m.f)(),u=Object(s.useRef)(null),d=Object(s.useState)(null),b=Object(o.a)(d,2),f=b[0],p=b[1],v=function(e){switch(e){case"backgroundPicker":p(Object(g.a)(Object(g.a)({},f),{},{type:e,title:"Background"}))}};return M(u,(function(){t&&a()}),n),Object(s.useEffect)((function(){t&&p(null)}),[t]),Object(s.useEffect)((function(){return l.listen((function(e){u.current.classList.contains("menu-open")&&a()}))}),[l]),i.a.createElement("div",{className:"board-menu ".concat(t?"menu-open":"  "),ref:u},i.a.createElement("div",{className:"pop-up-header"},i.a.createElement("h3",null,f?f.title:"Menu"),i.a.createElement("button",{className:"pop-up-close-btn clear-btn icon-lg",onClick:a},i.a.createElement(S.d,null))),f?i.a.createElement("div",{className:"board-menu-content"},"backgroundPicker"===f.type&&i.a.createElement(ge,{onGoBack:function(){p(null)},board:c,onBoardUpdated:r})):i.a.createElement("div",{className:"board-menu-content"},i.a.createElement("div",{className:"board-menu-nav"},i.a.createElement("button",{className:"clear-btn board-menu-nav-btn",onClick:function(){return v("backgroundPicker")}},"Change background"),i.a.createElement("button",{className:"clear-btn board-menu-nav-btn",onClick:function(){return v("boardName")}},"Change board name"),i.a.createElement("button",{className:"clear-btn board-menu-nav-btn"},"Delete board")),i.a.createElement("div",null,i.a.createElement("div",{className:"section-title"},i.a.createElement(me.a,{className:"icon-sm"}),i.a.createElement("h4",{className:""},"Activity")),i.a.createElement(se,null))))};t.default=function(){var e=Object(m.g)().boardId,t=Object(m.h)().path,a=Object(m.f)(),c=Object(m.h)().url,k=Object(s.useRef)(!0),g=Object(s.useRef)(null),E=Object(u.c)(),O=Object(u.d)((function(e){return e.board.currBoard})),j=Object(s.useState)(!1),h=Object(o.a)(j,2),N=h[0],y=h[1];Object(s.useEffect)((function(){(function(){var t=Object(l.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E(Object(d.a)(e));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),a.push("/boards");case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}})()()}),[E]),Object(s.useEffect)((function(){k.current&&O&&(console.log("board.",O._id),v.a.setup(),v.a.emit("board topic",O._id),v.a.on("update board",w),k.current=!1)}),[O]),Object(s.useEffect)((function(){return function(){v.a.off("update board",w),v.a.terminate()}}),[]);var C=function(){var e=Object(l.a)(r.a.mark((function e(t){var a,n,c,l=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:null,n=JSON.parse(JSON.stringify(O)),a&&n.activities.unshift(a),c=n.taskLists.findIndex((function(e){return e.id===t.id})),n.taskLists.splice(c,1,t),e.next=7,E(Object(d.d)(n));case 7:console.log("adterupdatelist");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=Object(s.useCallback)((function(e){E(Object(d.d)(e))}),[E]),w=function(e){E(Object(d.e)(e))},S=function(e){var t=JSON.parse(JSON.stringify(O)),a=t.taskLists.findIndex((function(t){return t.id===e}));t.taskLists.splice(a,1),x(t)},I=function(){y((function(e){return!e}))};return O?i.a.createElement("section",{className:"board-details",style:"color"===O.style.type?{backgroundColor:"".concat(O.style.background)}:{backgroundImage:"url(".concat(O.style.background,")")}},i.a.createElement("div",{className:"board-header"},i.a.createElement("button",null,"button2"),i.a.createElement("button",{className:"clear-btn open-menu-btn",onClick:I,ref:g},i.a.createElement("span",{className:"icon-sm"},i.a.createElement(f.a,null)),i.a.createElement("span",null,"Menu"))),i.a.createElement(Ee,{isMenuOpen:N,closeMenu:I,menuBtnRef:g,board:O,onBoardUpdated:x}),O&&i.a.createElement(b.a,{onDragEnd:function(e){var t=e.source,a=e.destination;if(a&&(t.index!==a.index||t.droppableId!==a.droppableId)){var r=Object(n.a)(O.taskLists),l=JSON.parse(JSON.stringify(O));if(t.droppableId===a.droppableId&&"board"===t.droppableId){var o=p.a.reorder(r,t.index,a.index);l.taskLists=o}else{var s=+t.droppableId,i=+a.droppableId;if(s===i){var u=p.a.reorder(r[s].tasks,t.index,a.index);l.taskLists[s].tasks=u}else{var d=p.a.move(r[s].tasks,r[i].tasks,t,a);l.taskLists[s].tasks=d[s],l.taskLists[i].tasks=d[i];var m={fromList:r[s].title,toList:r[i].title,task:r[s].tasks[t.index]},b=m.fromList,f=m.toList,v=m.task,k=J.a.newActivity("Moved this card from ".concat(b," to ").concat(f),'Moved  <a href="#'.concat(c,"/").concat(v.id,'">').concat(v.title,"</a> from ").concat(b," to ").concat(f),v.id);l.activities.unshift(k)}}w(l),x(l)}}},i.a.createElement(b.c,{droppableId:"board",type:"lists",direction:"horizontal"},(function(e,t){return i.a.createElement("div",Object.assign({className:"list-container",ref:e.innerRef},e.droppableProps),O.taskLists&&O.taskLists.map((function(e,t){return i.a.createElement(b.b,{key:e.id,draggableId:e.id,index:t,type:"lists"},(function(a,n){return i.a.createElement(z,{taskListIdx:t,taskList:e,onRemoveList:S,onListUpdated:C,innerRef:a.innerRef,provided:a})}))})),e.placeholder,i.a.createElement(de,{board:O,onBoardUpdated:x}))}))),O&&i.a.createElement(m.a,{exact:!0,path:"".concat(t,"/:taskId"),component:ue})):i.a.createElement("div",{style:{paddingTop:"50px"}},"baba")}}}]);
//# sourceMappingURL=4.9ce24b22.chunk.js.map